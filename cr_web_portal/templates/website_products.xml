<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="cr_web_portal.filmstrip_categories" inherit_id="website_sale.filmstrip_categories">
        <xpath expr="//div[hasclass('o_wsale_filmstip_container')]" position="replace">
        </xpath>
    </template>

    <template id="cr_web_portal.products" inherit_id="website_sale.products">
        <xpath expr="//div[hasclass('o_wsale_products_page')]//div[hasclass('oe_website_sale')]" position="attributes">
             <attribute name="class" add="mb-4" separator=" "/>
        </xpath>
        <xpath expr="//div[hasclass('o_wsale_products_page')]//div[hasclass('oe_website_sale')]" position="before">
            <div class="oe_structure" id="oe_structure_shop_all_header">
                <section class="s_cover parallax bg-black-50 pt160 s_parallax_no_overflow_hidden o_colored_level pb192"
                         data-scroll-background-ratio="1" style="background-image: none;">
                    <span class="s_parallax_bg oe_img_bg main_shop_header_bg" data-resize-width="1920"></span>
                    <div class="o_we_bg_filter bg-black-50"></div>
                    <div class="s_allow_columns container-fluid">
                        <div class="row">
                            <div class="col col-lg-12">
                                <p class="text-center blogs_sub_header">Product</p>
                                <h1 class="text-center blogs_main_header o_default_snippet_text">
                                    <span class="blogs_main_header_underline">Our Products</span>
                                </h1>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('products_header')]" position="attributes">
            <attribute name="class" add="d-none" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wsale_products_attributes_collapse']" position="replace">
            <div id="wsale_products_attributes_collapse" class=" position-relative">
                <t t-set="product_categories" t-value="request.env['product.public.category'].sudo().search([])"/>


                <form class="js_attributes position-relative mb-2" method="get">
                    <input t-if="category" type="hidden" name="category" t-att-value="category.id"/>
                    <input type="hidden" name="search" t-att-value="search"/>
                    <input type="hidden" name="order" t-att-value="order"/>
                    <div class="blog-filters-header-box mb-3">
                        <h2>Filter</h2>
                        <a href="/shop">Clear all</a>
                    </div>

                    <!-- Sort By Filter -->
                    <div class="accordion-item mb-3 d-none">
                        <div class="box-label d-flex align-items-center jus_con_bet mb-2">
                            <h3 class="o_products_attributes_title d-none d-lg-block">Sort By:</h3>
                            <button class="btn ml-auto outer-filter" type="button">
                                <span class="fa fa-angle-down"></span>
                            </button>
                        </div>

                        <div id="inner-size" class="collapse mt-2 mr-1 show">
                            <div class="flex-column mb-3">
                                <select class="form-select select_class_css mb-2 sort_selection"
                                        style="font-family:var(--pbmit-body-typography-font-family);"
                                        name="sort_by">
                                    <option value="" selected="true">Select...</option>
                                    <t t-foreach="website_sale_sortable" t-as="sortby">
                                        <option t-att-value="sortby[0]"
                                                t-attf-id="sortby_id_{{website_sale_sortable.index(sortby)}}"
                                                t-att-selected="sortby[0] in sortby_set">
                                            <span t-esc="sortby[1]"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- category Filter -->
                    <div class="accordion-item">
                        <div class="box-label d-flex align-items-center jus_con_bet ">
                            <h3 class="o_products_attributes_title d-lg-block">Category</h3>
                            <button class="btn ml-auto outer-filter" type="button">
                                <img src="/cr_web_portal/static/src/images/new_design_resource/arrow-down.svg"/>
                            </button>
                        </div>
                        <div class="collapse show">
                            <div class="search-container">
                                <button class="search-btn">
                                    <img src="/cr_web_portal/static/src/images/new_design_resource/search-normal.svg"/>
                                </button>
                                <input type="text" class="search_filter_input search-input" placeholder="Search"/>
                            </div>
                            <div id="inner-size" class="mt-2 mr-1 ">
                                <div class="flex-column mb-3">
                                    <t t-foreach="product_categories" t-as="product_category">
                                        <label class="mp-checkbox form-check">
                                            <input type="checkbox" name="category_select" class="category_select_input"
                                                   t-att-value="'category-%s' %product_category.id"
                                                   t-att-checked="'checked' if product_category.id in category_set else None"/>
                                            <span t-att-id="'category-%s' %product_category.id" class="checkmark"/>
                                            <span class="mp-service-name form-check-label"
                                                  t-att-for="'category-%s' %product_category.id"
                                                  t-out="product_category.name"/>
                                        </label>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Price Range Filter -->
                    <t t-set="isDisabled" t-value="available_min_price == available_max_price"/>
                    <div id="o_wsale_price_range_option"
                         t-attf-class="position-relative mb-3 {{_classes}} {{isDisabled and 'opacity-75 pe-none user-select-none'}}">
                        <div class="accordion-item ">
                            <div class="box-label d-flex align-items-center jus_con_bet"
                                 style="font-size:16px !important;">
                                <h3 class="o_products_attributes_title d-lg-block">
                                    <span t-attf-class="m-0 o_products_attributes_title {{_classes_title}}">Price
                                        Range
                                    </span>
                                </h3>
                                <button class="btn ml-auto outer-filter" type="button">
                                    <img src="/cr_web_portal/static/src/images/new_design_resource/arrow-down.svg"/>
                                </button>
                            </div>
                            <div id="inner-size" class="collapse mt-2 shop_price_range_attribute mr-1  show"
                                 style="overflow-x: clip;">
                                <input type="range" multiple="multiple"
                                       class="price_range_change"
                                       t-attf-class="form-range range-with-input {{_classes_input}}"
                                       t-att-data-currency="pricelist.currency_id.symbol"
                                       t-att-data-currency-position="pricelist.currency_id.position"
                                       t-att-step="pricelist.currency_id.rounding"
                                       t-att-min="'%f' % (available_min_price)"
                                       t-att-max="'%f' % (available_max_price)"
                                       t-att-value="'%f,%f' % (min_price, max_price)"/>
                            </div>
                        </div>
                    </div>

                    <!-- Product Attribute -->
                    <t t-foreach="attributes" t-as="a">
                        <div class="accordion-item" t-if="a.value_ids and len(a.value_ids) &gt; 1">
                            <div class="box-label d-flex align-items-center jus_con_bet ">
                                <h3 class="o_products_attributes_title d-lg-block" t-field="a.name"/>
                                <button class="btn ml-auto outer-filter" type="button">
                                    <img src="/cr_web_portal/static/src/images/new_design_resource/arrow-down.svg"/>
                                </button>
                            </div>
                            <t t-if="a.display_type == 'select'">
                                <div id="inner-size" class="collapse mt-2 mr-1 show">
                                    <div t-attf-id="o_products_attributes_{{a.id}}" class="">
                                        <select class="form-select select_class_css mb-2"
                                                name="attrib">
                                            <option value="" selected="true">select...</option>
                                            <t t-foreach="a.value_ids" t-as="v">
                                                <option t-att-value="'%s-%s' % (a.id,v.id)" t-esc="v.name"
                                                        t-att-selected="v.id in attrib_set"/>
                                            </t>
                                        </select>
                                    </div>
                                </div>
                            </t>
                            <t t-if="a.display_type == 'radio' or a.display_type == 'pills'">
                                <div class="collapse show">
                                    <div class="search-container">
                                        <button class="search-btn">
                                            <img src="/cr_web_portal/static/src/images/new_design_resource/search-normal.svg"/>
                                        </button>
                                        <input type="text" class="search_filter_input search-input"
                                               placeholder="Search"/>
                                    </div>
                                    <div id="inner-size" class="mt-2 mr-1">
                                        <div t-attf-id="o_products_attributes_{{a.id}}" class="">
                                            <div class="flex-column mb-3">
                                                <t t-foreach="a.value_ids" t-as="v">
                                                    <label class="mp-checkbox form-check">
                                                        <input type="checkbox" name="attrib" class=""
                                                               t-att-id="'%s-%s' % (a.id,v.id)"
                                                               t-att-value="'%s-%s' % (a.id,v.id)"
                                                               t-att-checked="'checked' if v.id in attrib_set else None"/>
                                                        <span t-att-id="v.id" class="checkmark"/>
                                                        <span class="mp-service-name form-check-label"
                                                              t-att-for="'%s-%s' % (a.id,v.id)" t-out="v.name"/>
                                                    </label>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                            <t t-if="a.display_type == 'color'">
                                <div class="collapse show">
                                    <div class="search-container">
                                        <button class="search-btn">
                                            <img src="/cr_web_portal/static/src/images/new_design_resource/search-normal.svg"/>
                                        </button>
                                        <input type="text" class="search_filter_input search-input"
                                               placeholder="Search"/>
                                    </div>
                                    <div id="inner-size" class="collapse mt-2 mr-1 show">
                                        <div t-attf-id="o_products_attributes_{{a.id}}" class="">
                                            <t t-foreach="a.value_ids" t-as="v">
                                                <label class="mp-checkbox form-check">
                                                    <input type="checkbox" name="attrib" class=""
                                                           t-att-id="'%s-%s' % (a.id,v.id)"
                                                           t-att-value="'%s-%s' % (a.id,v.id)"
                                                           t-att-checked="'checked' if v.id in attrib_set else None"/>
                                                    <span t-att-id="v.id" class="checkmark"/>
                                                    <span class="mp-service-name form-check-label"
                                                          t-att-for="'%s-%s' % (a.id,v.id)" t-out="v.name"/>
                                                </label>
                                            </t>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>
                </form>
            </div>
            <div class="mobile_shop_btns">
                <button class="shop_section_cancel_btn auth-secondary-btn">Cancel</button>
                <button class="shop_filter_apply_btn auth-primary-btn">Apply</button>
            </div>
            <div class="sort_by_mobile_device_section">
                <div class="sort_by_mobile_device_box">
                    <div class="radio-group">
                        <t t-foreach="website_sale_sortable" t-as="sortby">
                            <label class="custom-radio">
                                <input type="radio" t-att-checked="sortby[0] in sortby_set"
                                       class="onchange_sortby_mobile_input"
                                       t-attf-id="sortby_id_{{website_sale_sortable.index(sortby)}}"/>
                                <span class="radio-mark"></span>
                                <t t-esc="sortby[1]"/>
                            </label>
                        </t>
                    </div>
                </div>
                <div class="mobile_shop_sort_by_btns">
                    <button class="shop_sortby_section_cancel_btn auth-secondary-btn">Cancel</button>
                    <button class="shop_sortby_filter_apply_btn auth-primary-btn">Apply</button>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('products_header')]" position="replace">
            <div class="mobile_shop_filter_and_sort_btns d-flex">
                <button class="shop_activate_filters d-flex">
                    <img src="/cr_web_portal/static/src/images/new_design_resource/blog_filter_icon.svg" width="24px"
                         height="24px"/>
                    Filter
                </button>
                <button class="shop_activate_sortby d-flex">
                    <img src="/cr_web_portal/static/src/images/new_design_resource/sort.svg" width="24px"
                         height="24px"/>
                    Sort by
                </button>
            </div>
            <div class="d-flex">
                <div class="shop_header_search_box d-flex justify-content-between pb-3">
                    <t t-call="website_sale.search">
                        <t t-set="search" t-value="original_search or search"/>
                        <t t-set="_form_classes" t-valuef="d-lg-inline {{'d-inline'}}"/>
                    </t>
                </div>
                <t t-set="_classes" t-valuef="d-none d-lg-inline-block ms-3"/>
                <div t-attf-class="o_sortby_dropdown dropdown dropdown_sorty_by form_extended_dropdown_sorty_by ms-lg-3 {{_classes}}">
                    <a role="button" href="#" t-attf-class="dropdown-toggle btn btn-{{navClass}}"
                       data-bs-toggle="dropdown">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/sort.svg" width="24px"
                             height="24px"/>
                        <span t-if="len(sortby_set) > 0" class="d-none d-lg-inline">
                            <t t-foreach="website_sale_sortable" t-as="sortby">
                                <t t-if="sortby[0] in sortby_set" t-out="sortby[1]"/>
                            </t>
                        </span>
                        <h3 t-else="" class="d-none d-lg-inline">Sort by</h3>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end" role="menu">
                        <t t-foreach="website_sale_sortable" t-as="sortby">
                            <a role="menuitem" rel="noindex,nofollow"
                               t-attf-id="sortby_id_{{website_sale_sortable.index(sortby)}}"
                               class="dropdown-item sort_drop_click">
                                <span t-out="sortby[1]"/>
                            </a>
                        </t>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <div></div>
                <div class="custom-pager">
                    <ul t-if="pager['page_count'] > 1" t-attf-class="pagination m-0" t-att-style="style or None">
                        <li t-attf-class="page-item #{'disabled' if pager['page']['num'] == 1 else ''}">
                            <a t-att-href=" pager['page_previous']['url'] if pager['page']['num'] != 1 else None"
                               t-attf-class="page-link #{extraLinkClass}">
                                <span class="fa fa-chevron-left" role="img" aria-label="Previous" title="Previous"/>
                            </a>
                        </li>
                        <t t-foreach="pager['pages']" t-as="page">
                            <li t-attf-class="page-item #{'active' if page['num'] == pager['page']['num'] else ''}">
                                <a t-att-href="page['url']" t-attf-class="page-link #{extraLinkClass}"
                                   t-out="page['num']"/>
                            </li>
                        </t>
                        <li t-attf-class="page-item #{'disabled' if pager['page']['num'] == pager['page_count'] else ''}">
                            <a t-att-href="pager['page_next']['url'] if pager['page']['num'] != pager['page_count'] else None"
                               t-attf-class="page-link #{extraLinkClass}">
                                <span class="fa fa-chevron-right" role="img" aria-label="Next" title="Next"/>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[contains(@t-attf-class, 'o_wsale_product_grid_wrapper')]" position="replace">
            <div t-attf-class="o_wsale_product_grid_wrapper card-hover position-relative h-100 o_wsale_product_grid_wrapper_#{td_product['x']}_#{td_product['y']}">
                <t t-call="website_sale.products_item">
                    <t t-set="product" t-value="td_product['product']"/>
                </t>
            </div>
        </xpath>
        <xpath expr="//table[@t-att-data-name='grid_block_name']" position="attributes">
            <attribute name="class">table table-borderless h-100 m-0 overflow-visible</attribute>
        </xpath>
        <!--    Hide price range bottom of atrribute filter div in laptop view  -->
        <xpath expr="//t[@t-if='opt_wsale_filter_price and opt_wsale_attributes']" position="replace">
        </xpath>
        <xpath expr="//div[hasclass('products_pager')]" position="after">
            <div class="shop_text_box">
                Lorem ipsum dolor sit amet consectetur. Eu in commodo arcu dictum id urna non sodales est. Viverra
                cursus fermentum faucibus in nunc varius vestibulum condimentum. Metus integer a non semper quis
                interdum. Viverra facilisis sed adipiscing id proin quis.
            </div>
        </xpath>
        <xpath expr="//table[hasclass('table-borderless')]//tbody" position="replace">
            <tbody class="product-laptop-table">
                <tr t-foreach="bins" t-as="tr_product">
                    <t t-foreach="tr_product" t-as="td_product">
                        <t t-if="td_product">
                            <!-- We use t-attf-class here to allow easier customization -->
                            <td t-att-colspan="td_product['x'] != 1 and td_product['x']"
                                t-att-rowspan="td_product['y'] != 1 and td_product['y']"
                                t-attf-class="oe_product"
                                t-att-data-ribbon-id="td_product['ribbon'].id"
                                t-att-data-name="product_block_name">
                                <div t-attf-class="o_wsale_product_grid_wrapper position-relative h-100 o_wsale_product_grid_wrapper_#{td_product['x']}_#{td_product['y']}">
                                    <t t-call="website_sale.products_item">
                                        <t t-set="product" t-value="td_product['product']"/>
                                    </t>
                                </div>
                            </td>
                        </t>
                        <td t-else=""/>
                    </t>
                </tr>
            </tbody>
            <tbody class="product-mobile-table">
                <tr t-foreach="mobile_rows" t-as="tr_product">
                    <t t-foreach="tr_product" t-as="td_product">
                        <t t-if="td_product">
                            <!-- We use t-attf-class here to allow easier customization -->
                            <td t-att-colspan="td_product['x'] != 1 and td_product['x']"
                                t-att-rowspan="td_product['y'] != 1 and td_product['y']"
                                t-attf-class="oe_product"
                                t-att-data-ribbon-id="td_product['ribbon'].id"
                                t-att-data-name="product_block_name">
                                <div t-attf-class="o_wsale_product_grid_wrapper position-relative h-100 o_wsale_product_grid_wrapper_#{td_product['x']}_#{td_product['y']}">
                                    <t t-call="website_sale.products_item">
                                        <t t-set="product" t-value="td_product['product']"/>
                                    </t>
                                </div>
                            </td>
                        </t>
                        <td t-else=""/>
                    </t>
                </tr>
            </tbody>
        </xpath>
        <xpath expr="//t[@t-call='website.pager']" position="replace">
            <ul t-if="pager['page_count'] > 1" t-attf-class="pagination m-0" t-att-style="style or None">
                <li t-attf-class="page-item #{'disabled' if pager['page']['num'] == 1 else ''}">
                    <a t-att-href=" pager['page_previous']['url'] if pager['page']['num'] != 1 else None"
                       t-attf-class="page-link #{extraLinkClass}">
                        <span class="fa fa-chevron-left" role="img" aria-label="Previous" title="Previous"/>
                    </a>
                </li>
                <t t-foreach="pager['pages']" t-as="page">
                    <li t-attf-class="page-item #{'active' if page['num'] == pager['page']['num'] else ''}">
                        <a t-att-href="page['url']" t-attf-class="page-link #{extraLinkClass}" t-out="page['num']"/>
                    </li>
                </t>
                <li t-attf-class="page-item #{'disabled' if pager['page']['num'] == pager['page_count'] else ''}">
                    <a t-att-href="pager['page_next']['url'] if pager['page']['num'] != pager['page_count'] else None"
                       t-attf-class="page-link #{extraLinkClass}">
                        <span class="fa fa-chevron-right" role="img" aria-label="Next" title="Next"/>
                    </a>
                </li>
            </ul>
        </xpath>
    </template>

    <template id="cr_web_portal.products_item" inherit_id="website_sale.products_item">
        <xpath expr="//form[hasclass('oe_product_cart')]" position="attributes">
            <attribute name="class" add="card" separator=" "/>
        </xpath>
        <xpath expr="//div[hasclass('oe_product_image')]" position="attributes">
            <attribute name="class" add="card-img" separator=" "/>
        </xpath>
        <xpath expr="//*[hasclass('o_wsale_products_item_title')]" position="replace">
            <p class="o_wsale_products_item_title mb-2">
                <a class="text-primary text-decoration-none" itemprop="name" t-att-href="product_href"
                   t-att-content="product.name" t-field="product.name"/>
                <a t-if="not product.website_published" role="button" t-att-href="product_href"
                   class="btn btn-sm btn-danger" title="This product is unpublished.">
                    Unpublished
                </a>
            </p>
        </xpath>
    </template>

    <template id="cr_web_portal.product_details_custom" inherit_id="website_sale.product">
        <xpath expr="//section[@id='product_detail']" position="replace">
            <section
                    t-attf-class="container py-4 oe_website_sale #{'discount' if combination_info['has_discounted_price'] else ''}"
                    id="product_detail"
                    t-att-data-view-track="view_track and '1' or '0'"
                    t-att-data-product-tracking-info="json.dumps(request.env['product.template'].get_google_analytics_data(combination_info))">
                <div class="row" id="product_detail_main" data-name="Product Page"
                     t-att-data-image_width="website.product_page_image_width"
                     t-att-data-image_layout="website.product_page_image_layout">
                    <t t-set="image_cols" t-value="website._get_product_page_proportions()"/>
                    <div t-attf-class="col-lg-#{image_cols[0]} o_wsale_product_images position-relative"
                         t-if="website.product_page_image_width != 'none'">
                        <t t-call="website_sale.shop_product_images"/>
                    </div>
                    <div t-attf-class="col-lg-#{image_cols[1]}" id="product_details">
                        <t t-set="base_url" t-value="product.get_base_url()"/>
                        <h1 itemprop="name" t-field="product.name">Product Name</h1>
                        <span itemprop="url" style="display:none;" t-esc="base_url + product.website_url"/>
                        <span itemprop="image" style="display:none;"
                              t-esc="base_url + website.image_url(product, 'image_1920')"/>
                        <t t-if="is_view_active('website_sale.product_comment')">
                            <a href="#o_product_page_reviews" class="o_product_page_reviews_link text-decoration-none">
                                <t t-call="portal_rating.rating_widget_stars_static">
                                    <t t-set="rating_avg" t-value="product.rating_avg"/>
                                    <t t-set="trans_text_plural">%s reviews</t>
                                    <t t-set="trans_text_singular">%s review</t>
                                    <t t-set="rating_count"
                                       t-value="(trans_text_plural if product.rating_count > 1 else trans_text_singular) % product.rating_count"/>
                                </t>
                            </a>
                        </t>
                        <p t-field="product.description_sale" class="text-muted my-2"
                           placeholder="A short description that will also appear on documents."/>
                        <form t-if="product._is_add_to_cart_possible()" action="/shop/cart/update" method="POST">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"
                                   t-nocache="The csrf token must always be up to date."/>
                            <div class="js_product js_main_product mb-3">
                                <div>
                                    <t t-call="website_sale.product_price"/>
                                    <small t-if="combination_info['base_unit_price']"
                                           class="ms-1 text-muted o_base_unit_price_wrapper d-none"
                                           groups="website_sale.group_show_uom_price">
                                        <t t-call='website_sale.base_unit_price'/>
                                    </small>
                                </div>
                                <t t-placeholder="select">
                                    <input type="hidden" class="product_id" name="product_id"
                                           t-att-value="product_variant.id"/>
                                    <input type="hidden" class="product_template_id" name="product_template_id"
                                           t-att-value="product.id"/>
                                    <input t-if="product.public_categ_ids.ids" type="hidden" class="product_category_id"
                                           name="product_category_id" t-att-value="product.public_categ_ids.ids[0]"/>
                                    <input t-if="product.product_tag_ids.ids" type="hidden" class="product_tag_id"
                                           name="product_tag_id" t-att-value="product.product_tag_ids.ids[0]"/>
                                    <t t-if="combination" t-call="sale.variants">
                                        <t t-set="ul_class" t-valuef="flex-column"/>
                                        <t t-set="parent_combination" t-value="None"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="d-none js_add_cart_variants mb-0"
                                            t-att-data-attribute_exclusions="{'exclusions: []'}"/>
                                    </t>
                                </t>
                                <div id="o_wsale_cta_wrapper" class="d-flex flex-wrap align-items-center">
                                    <t t-set="hasQuantities" t-value="false"/>
                                    <t t-set="hasBuyNow" t-value="false"/>
                                    <t t-set="ctaSizeBig" t-value="not hasQuantities or not hasBuyNow"/>

                                    <div id="add_to_cart_wrap"
                                         t-attf-class="{{'d-none' if combination_info['prevent_zero_price_sale'] else ''}} align-items-center mb-2 me-auto">
                                        <a data-animation-selector=".o_wsale_product_images" role="button"
                                           id="add_to_cart"
                                           t-attf-class="btn btn-primary js_check_product a-submit flex-grow-1 #{'btn-lg' if ctaSizeBig else ''}"
                                           href="#">
                                            Add To Cart
                                        </a>
                                    </div>
                                    <div id="product_option_block" class="d-flex flex-wrap w-100"/>
                                </div>
                                <div id="contact_us_wrapper"
                                     t-attf-class="{{'d-flex' if combination_info['prevent_zero_price_sale'] else 'd-none'}} oe_structure oe_structure_solo #{_div_classes}">
                                    <section class="s_text_block" data-snippet="s_text_block" data-name="Text">
                                        <div class="container">
                                            <a t-att-href="website.contact_us_button_url"
                                               class="btn btn-primary btn_cta">Contact Us
                                            </a>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </form>
                        <p t-elif="not product.active" class="alert alert-warning">This product is no longer
                            available.
                        </p>
                        <p t-else="" class="alert alert-warning">This product has no valid combination.</p>
                        <div id="product_attributes_simple">
                            <t t-set="single_value_attributes"
                               t-value="product.valid_product_template_attribute_line_ids._prepare_single_value_for_display()"/>
                            <table t-attf-class="table table-sm text-muted {{'' if single_value_attributes else 'd-none'}}">
                                <t t-foreach="single_value_attributes" t-as="attribute">
                                    <tr>
                                        <td>
                                            <span t-field="attribute.name"/>:
                                            <t t-foreach="single_value_attributes[attribute]" t-as="ptal">
                                                <span t-field="ptal.product_template_value_ids._only_active().name"/>
                                                <t t-if="not ptal_last">,</t>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </table>
                        </div>
                        <div id="o_product_terms_and_share"
                             class="d-flex justify-content-between flex-column flex-md-row align-items-md-end mb-3">
                        </div>
                    </div>
                </div>
            </section>
        </xpath>
        <xpath expr="//div[@id='product_details']" position="replace">
            <div t-attf-class="col-lg-#{image_cols[1]}" id="product_details">
                <t t-set="base_url" t-value="product.get_base_url()"/>
                <!--<h1 itemprop="name" t-field="product.name">Product Name</h1>-->
                <div id="toast-container"></div>
                <div class="product-info">
                    <div t-if="len(product.public_categ_ids) &gt; 0" class="product_detail_tmp_category_name">
                        <t t-foreach="product.public_categ_ids" t-as="product_category">
                            <t t-esc="product_category.name"/>
                        </t>
                    </div>
                    <h3 class="pbmit-element-title text-left">
                        <span t-field="product.name"/>
                    </h3>
                    <p class="default_code">
                    </p>
                    <div class="customization-card-tooltip customization-desktop-view d-none">
                        <div class="icon">
                            <img src="/cr_web_portal/static/src/images/mech-custom/customization 1.png"
                                 alt="Customization Icon"/>
                        </div>
                        <div class="text">
                            Customization Available
                        </div>
                        <!-- Tooltip Content -->
                        <div class="tooltip-content">
                        </div>
                    </div>
                    <div class="customization-card-tooltip customization-mbl-view d-none">
                        <div class="icon">
                            <img src="/cr_web_portal/static/src/images/mech-custom/customization 1.png"
                                 alt="Customization Icon"/>
                        </div>
                        <div class="text">
                            Customization Available
                        </div>
                        <!-- Tooltip Content -->
                        <div class="tooltip-content">
                        </div>
                    </div>
                </div>
                <p class="description-class" t-if="product.description_sale" t-field="product.description_sale"/>
                <a t-if="product.description_sale" class="description-class read-description-more">Read more...</a>


                <t t-set="single_value_attributes"
                   t-value="product.valid_product_template_attribute_line_ids._prepare_single_value_for_display()"/>
                <t t-if="single_value_attributes" t-foreach="single_value_attributes" t-as="attribute">
                    <div t-if="not attribute.hide_in_product_detail_page" class="variant_attribute"
                         style="margin-bottom: 12px !important;">
                        <strong t-field="attribute.name" class="attribute_name"/>
                        <div class="radio_input_value" t-foreach="single_value_attributes[attribute]"
                             t-as="ptal">
                            <span t-field="ptal.product_template_value_ids._only_active().name"/>
                        </div>
                    </div>
                </t>
                <span itemprop="url" style="display:none;" t-esc="base_url + product.website_url"/>
                <span itemprop="image" style="display:none;"
                      t-esc="base_url + website.image_url(product, 'image_1920')"/>
                <form t-if="product._is_add_to_cart_possible()" action="/shop/cart/update" method="POST">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"
                           t-nocache="The csrf token must always be up to date."/>
                    <div class="js_product js_main_product mb-3">
                        <t t-placeholder="select">
                            <input type="hidden" class="product_id" name="product_id" t-att-value="product_variant.id"/>
                            <input type="hidden" class="product_template_id" name="product_template_id"
                                   t-att-value="product.id"/>
                            <input t-if="product.public_categ_ids.ids" type="hidden" class="product_category_id"
                                   name="product_category_id" t-att-value="product.public_categ_ids.ids[0]"/>
                            <input t-if="product.product_tag_ids.ids" type="hidden" class="product_tag_id"
                                   name="product_tag_id" t-att-value="product.product_tag_ids.ids[0]"/>
                            <div>
                                <t t-if="combination" t-call="sale.variants">
                                    <t t-set="ul_class" t-valuef="flex-column"/>
                                    <t t-set="parent_combination" t-value="None"/>
                                </t>
                                <t t-else="">
                                    <ul class="d-none js_add_cart_variants mb-0"
                                        t-att-data-attribute_exclusions="{'exclusions: []'}"/>
                                </t>
                            </div>
                        </t>
                        <div t-if="not combination_info['prevent_zero_price_sale']" class="is_custimizable_block"
                             id="is_custimizable_block">
                            <h5>Customization feature</h5>
                            <p>This product can be customized with features like UV printing and custom cutouts.
                                <br/>
                                <b>Select ‘Customize’ to start and ‘Submit Inquiry’</b>
                                to provide your customization files and details for a personalized quote.
                            </p>
                            <div class="custom_white_block">
                                <label class="mp-checkbox form-check" style="">
                                    <input type="checkbox" class="is_custimizable" id="is_custimizable"/>
                                    <span t-att-id="_is_custimizable" class="checkmark"/>
                                    <span class="mp-service-name form-check-label">Customize</span>
                                </label>
                            </div>
                        </div>
                        <div class="dynamic_content">

                        </div>
                        <div id="o_wsale_cta_wrapper" class="">
                            <t t-set="hasQuantities" t-value="false"/>
                            <t t-set="hasBuyNow" t-value="false"/>
                            <t t-set="ctaSizeBig" t-value="not hasQuantities or not hasBuyNow"/>
                            <div class="product-count">
                                <div id="product_unavailable"
                                     t-attf-class="{{'d-flex' if combination_info['prevent_zero_price_sale'] else 'd-none'}}">
                                    <h3 t-field="website.prevent_zero_price_sale_text"/>
                                    <p>
                                        The product you're interested in is currently unavailable.
                                        <br/>
                                        Please an inquiry to receive details on availability and pricing.
                                    </p>
                                </div>
                                <div>
                                    <div t-attf-class="css_quantity input-group {{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-flex'}} me-2 mb-2 align-middle #{'input-group-lg' if ctaSizeBig else ''}"
                                         contenteditable="false">
                                        <a t-attf-href="#" class="js_add_cart_json quantity-arrow-minus qua_mr"
                                           aria-label="Remove one" title="Remove one">
                                            <i class="fa fa-minus" style="color:#787878;"/>
                                        </a>
                                        <input type="text" class="form-control quantity text-center quantity-num"
                                               data-min="1" name="add_qty" t-att-value="add_qty or 1"/>
                                        <a t-attf-href="#"
                                           class="float_left js_add_cart_json quantity-arrow-plus qua_ml1"
                                           aria-label="Add one" title="Add one">
                                            <i class="fa fa-plus" style="color:#787878;"/>
                                        </a>
                                    </div>

                                    <div class="product-price-discount">
                                        <t t-call="website_sale.product_price"/>
                                        <span class="exclusive_price_tag">(Exc. of taxes)</span>

                                        <small t-if="combination_info['base_unit_price']"
                                               class="ms-1 text-muted o_base_unit_price_wrapper d-none"
                                               groups="website_sale.group_show_uom_price">
                                            <t t-call="website_sale.base_unit_price"/>
                                            <span class="exclusive_price_tag">(Exc. of taxes)</span>
                                        </small>

                                    </div>
                                </div>
                            </div>
                            <div id="add_to_cart_wrap"
                                 t-attf-class="{{'d-none' if combination_info['prevent_zero_price_sale'] else ''}} align-items-center mb-2 me-auto">
                                <a data-animation-selector=".o_wsale_product_images" role="button" id="add_to_cart"
                                   t-attf-class="btn btn-primary js_check_product a-submit flex-grow-1 #{'btn-lg' if ctaSizeBig else ''}"
                                   href="#">
                                    Add To Cart
                                </a>
                            </div>
                            <div id="product_option_block" class="d-flex flex-wrap w-100"/>
                        </div>
                    </div>
                </form>
                <p t-elif="not product.active" class="alert alert-warning">This product is no longer available.</p>
                <p t-else="" class="alert alert-warning">This product has no valid combination.</p>
                <div id="o_product_terms_and_share"
                     class="d-flex SDSDSDSSD justify-content-between flex-column flex-md-row align-items-md-end mb-3 d-none">
                </div>
            </div>
        </xpath>
    </template>

    <template id="mp_product_carousel" name="Mechpower Product Carousel"
              inherit_id="website_sale.carousel_product_indicators" active="True">
        <xpath expr="//div[contains(@t-attf-class, 'o_carousel_product_indicators')]" position="after">
            <div class="class_dynamic_product_attachment mt-3">
            </div>
        </xpath>
    </template>

    <template id="mp_alternative_products" name="Mechpower Alternative Products"
              inherit_id="website_sale.alternative_products" active="True">
        <xpath expr="//div[@id='oe_structure_website_sale_recommended_products']" position="replace">
            <div t-if="0 &lt; len(product_variant.alternative_product_ids.ids)"
                 class="oe_structure oe_empty similar_products_section">
                <section class="italtronics-products">
                    <div class="container">
                        <div class="header-box-custom mt-4" style="max-width: 100% !important;">
                            <h5 class="sub-heading-custom mp-caption-custom" style="text-align: center;">PRODUCTS</h5>
                            <h2 class="main-heading-custom" style="text-align: center;">
                                <span
                                        class="mp_underline_custom">Similar Products
                                </span>
                            </h2>
                        </div>
                        <div>
                            <div class="owl-carousel italtronics-products-carousel">
                                <t t-foreach="product.alternative_product_ids"
                                   t-as="product_alternative_product_tmpl_id">
                                    <t t-if="product_alternative_product_tmpl_id.product_variant_ids"
                                       t-foreach="product_alternative_product_tmpl_id.product_variant_ids"
                                       t-as="product_alternative_product_id">
                                        <a t-att-href="product_alternative_product_id.website_url"
                                           class="carousel-item-italtronics">
                                            <div class="italtronic-img">
                                                <t t-if="product_alternative_product_id.product_variant_image_ids and product_alternative_product_id.product_variant_image_ids.filtered(lambda x: x.image_1920)">
                                                    <img class="" loading="lazy"
                                                         t-att-src="image_data_uri(product_alternative_product_id.product_variant_image_ids.filtered(lambda x: x.image_1920)[0].image_512)"
                                                         t-att-alt="product_alternative_product_id.product_variant_image_ids.filtered(lambda x: x.image_1920)[0].display_name"/>
                                                </t>
                                            </div>
                                            <div class="italtronics-info">
                                                <div>
                                                    <t t-if="len(product_variant.public_categ_ids) &gt; 0"
                                                       class="product_detail_tmp_category_name">
                                                        <t t-foreach="product_alternative_product_id.public_categ_ids"
                                                           t-as="product_category">
                                                            <p class="italtronics-sub-header"
                                                               t-esc="product_category.display_name"/>
                                                        </t>
                                                    </t>
                                                    <h4 t-out="product_alternative_product_id.display_name"/>
                                                </div>
                                                <div>
                                                    <t t-if="product_alternative_product_id._get_sales_prices(pricelist) != False">
                                                        <p>
                                                            Starting from
                                                            <span class="mb-0"
                                                                  t-esc="product_alternative_product_id._get_sales_prices(pricelist)"
                                                                  t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                                        </p>
                                                    </t>
                                                    <t t-else="">
                                                        <p t-out="website.prevent_zero_price_sale_text"/>
                                                    </t>
                                                </div>
                                            </div>
                                        </a>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.dynamic_filter_template_product_product_borderless_1_custom"
              inherit_id="website_sale.dynamic_filter_template_product_product_borderless_1">
        <xpath expr="//div[hasclass('o_carousel_product_card')]" position="replace">
            <div class="o_carousel_product_card card-hover bg-transparent w-100 card border-0">
                <div t-if="is_sample" class="h5 o_ribbon_right bg-primary text-uppercase">Sample</div>
                <input type="hidden" name="product-id" t-att-data-product-id="record.id"/>
                <a class="o_carousel_product_img_link o_dynamic_product_hovered stretched-link"
                   t-att-href="record.website_url">
                    <div class="overflow-hidden rounded">
                        <t t-if="record.product_variant_image_ids.filtered(lambda x: x.image_1920)">
                            <img class="card-img-top o_img_product_square o_img_product_cover h-auto" loading="lazy"
                                 t-att-src="image_data_uri(record.product_variant_image_ids.filtered(lambda x: x.image_1920)[0].image_512)"
                                 t-att-alt="record.product_variant_image_ids.filtered(lambda x: x.image_1920)[0].display_name"/>
                        </t>
                        <t t-else="">
                            <img class="card-img-top o_img_product_square o_img_product_cover h-auto" loading="lazy"
                                 t-att-src="data['image_512']"
                                 t-att-alt="record.display_name"/>
                        </t>
                    </div>
                </a>
                <div class="o_carousel_product_card_body d-flex flex-wrap flex-column justify-content-between h-100 p-3">
                    <div class="h6 card-title" t-field="record.display_name"/>
                    <div>
                        <t t-if="is_view_active('website_sale.product_comment')"
                           t-call="portal_rating.rating_widget_stars_static">
                            <t t-set="rating_avg" t-value="record.rating_avg"/>
                            <t t-set="rating_count" t-value="record.rating_count"/>
                        </t>
                        <div class="mt-2">
                            <t t-call="website_sale.price_dynamic_filter_template_product_product"/>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
        <xpath expr="//t[@t-call='website_sale.price_dynamic_filter_template_product_product']" position="replace">
            <div t-if="len(record.public_categ_ids) &gt; 0">
                <t t-foreach="record.public_categ_ids" t-as="product_category">
                    <t t-esc="product_category.name"/>
                </t>
            </div>
            <div class="price">
                <p class="m0">Starting from
                    <t t-call="website_sale.price_dynamic_filter_template_product_product"/>
                </p>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('card-title')]" position="replace">
            <div class="product-name-carousel">
                <a class="text-decoration-none" itemprop="name" t-att-href="product_href"
                   t-att-content="record.display_name"
                   t-field="record.display_name"/>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.product_price" inherit_id="website_sale.product_price">
        <xpath expr="div[@id='product_unavailable']" position="replace">
            <div id="palce_inquiry_btn"
                 t-attf-class="{{'d-flex' if combination_info['prevent_zero_price_sale'] else 'd-none'}}">
                <input type="checkbox" class="is_custimizable_enquiry d-none" id="is_custimizable_enquiry"/>
                <a role="button" class="btn custom-btn-green-round place_inquiry">
                    Submit Inquiry
                </a>
            </div>
        </xpath>
        <xpath expr="div[@itemprop='offers']" position="before">
            <meta itemprop="name" style="display:none;" t-att-content="product.name"/>
        </xpath>
    </template>

    <template id="cr_web_portal.products_item_custom_name" inherit_id="website_sale.products_item">
        <xpath expr="//a[@t-field='product.name']" position="replace">
            <div class="product-name mt-20">
                <t t-if="variant_url and variant_url.get(product.id)">
                    <div t-if="len(product.public_categ_ids) &gt; 0" class="product_tmp_category_name">
                        <t t-foreach="product.public_categ_ids" t-as="product_category">
                            <t t-esc="product_category.name"/>
                        </t>
                    </div>
                    <a class="text-decoration-none product_variant_name" itemprop="name"
                       t-att-href="variant_url.get(product.id)[0]"
                       t-att-content="product.name"
                       t-field="product.name"/>
                </t>
                <t t-else="">
                    <div t-if="len(product.public_categ_ids) &gt; 0" class="product_tmp_category_name">
                        <t t-foreach="product.public_categ_ids" t-as="product_category">
                            <t t-esc="product_category.name"/>
                        </t>
                    </div>
                    <a class="text-decoration-none product_variant_name" itemprop="name" t-att-href="product_href"
                       t-att-content="product.name"
                       t-field="product.name"/>
                </t>
            </div>
        </xpath>
        <xpath expr="//a[hasclass('oe_product_image_link')]" position="replace">
            <t t-if="variant_url and variant_url.get(product.id)">
                <a t-att-href="variant_url.get(product.id)[0]"
                   class="oe_product_image_link d-block h-100 position-relative"
                   itemprop="url"
                   contenteditable="false">
                    <t t-set="image_holder" t-value="variant_url.get(product.id)[1]._get_image_holder()"/>
                    <span t-field="image_holder.image_1920"
                          t-options="{'widget': 'image', 'preview_image': image_type, 'itemprop': 'image', 'class': 'h-100 w-100 position-absolute'}"
                          class="oe_product_image_img_wrapper d-flex h-100 justify-content-center align-items-center position-absolute"/>

                    <t t-set="bg_color" t-value="td_product['ribbon']['bg_color'] or ''"/>
                    <t t-set="text_color" t-value="td_product['ribbon']['text_color']"/>
                    <t t-set="bg_class" t-value="td_product['ribbon']['html_class']"/>
                    <span t-attf-class="o_ribbon o_not_editable #{bg_class}"
                          t-attf-style="#{text_color and ('color: %s; ' % text_color)}#{bg_color and 'background-color:' + bg_color}"
                          t-out="td_product['ribbon']['html'] or ''"/>
                </a>
            </t>
            <t t-else="">
                <t t-set="product_variant_id" t-value="product._get_first_possible_variant_id()"/>
                <t t-set="product_variant"
                   t-value="request.env['product.product'].sudo().browse(int(product_variant_id))"/>
                <t t-if="product_variant">
                    <a t-att-href="product_href" class="oe_product_image_link d-block h-100 position-relative"
                       itemprop="url"
                       contenteditable="false">
                        <t t-set="image_holder" t-value="product_variant._get_image_holder()"/>
                        <span t-field="image_holder.image_1920"
                              t-options="{'widget': 'image', 'preview_image': image_type, 'itemprop': 'image', 'class': 'h-100 w-100 position-absolute'}"
                              class="oe_product_image_img_wrapper d-flex h-100 justify-content-center align-items-center position-absolute"/>

                        <t t-set="bg_color" t-value="td_product['ribbon']['bg_color'] or ''"/>
                        <t t-set="text_color" t-value="td_product['ribbon']['text_color']"/>
                        <t t-set="bg_class" t-value="td_product['ribbon']['html_class']"/>
                        <span t-attf-class="o_ribbon o_not_editable #{bg_class}"
                              t-attf-style="#{text_color and ('color: %s; ' % text_color)}#{bg_color and 'background-color:' + bg_color}"
                              t-out="td_product['ribbon']['html'] or ''"/>
                    </a>
                </t>
                <t t-else="">
                    <a t-att-href="product_href" class="oe_product_image_link d-block h-100 position-relative"
                       itemprop="url"
                       contenteditable="false">
                        <t t-set="image_holder" t-value="product._get_image_holder()"/>
                        <span t-field="image_holder.image_1920"
                              t-options="{'widget': 'image', 'preview_image': image_type, 'itemprop': 'image', 'class': 'h-100 w-100 position-absolute'}"
                              class="oe_product_image_img_wrapper d-flex h-100 justify-content-center align-items-center position-absolute"/>

                        <t t-set="bg_color" t-value="td_product['ribbon']['bg_color'] or ''"/>
                        <t t-set="text_color" t-value="td_product['ribbon']['text_color']"/>
                        <t t-set="bg_class" t-value="td_product['ribbon']['html_class']"/>
                        <span t-attf-class="o_ribbon o_not_editable #{bg_class}"
                              t-attf-style="#{text_color and ('color: %s; ' % text_color)}#{bg_color and 'background-color:' + bg_color}"
                              t-out="td_product['ribbon']['html'] or ''"/>
                    </a>
                </t>
            </t>
        </xpath>
        <xpath expr="//div[hasclass('product_price')]" position="replace">
            <div class="price product_variant_price_segment">
                <p class="m0">
                    <span class="product_price" itemprop="offers" itemscope="itemscope"
                          itemtype="http://schema.org/Offer">
                        <t t-if="'base_price' in template_price_vals and (template_price_vals['base_price'] &gt; template_price_vals['price_reduce']) and (template_price_vals['price_reduce'] or not website.prevent_zero_price_sale)">
                            Starting from
                            <del t-attf-class="text-muted me-1 h6 mb-0" style="white-space: nowrap;">
                                <em class="small" t-esc="template_price_vals['base_price']"
                                    t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                            </del>
                        </t>
                        <t t-if="template_price_vals['price_reduce'] or not website.prevent_zero_price_sale">
                            Starting from
                            <span class="mb-0" t-esc="template_price_vals['price_reduce']"
                                  t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        </t>
                        <span class="mb-0" t-else="" t-field="website.prevent_zero_price_sale_text"/>
                        <t t-if="product_variant">
                            <meta t-if="int(product_variant.sudo().qty_available) > 0" itemprop="availability"
                                  content="http://schema.org/InStock"/>
                            <meta t-else="" itemprop="availability" content="http://schema.org/OutOfStock"/>
                        </t>
                        <t t-else="">
                            <meta t-if="int(product.sudo().qty_available) > 0" itemprop="availability"
                                  content="http://schema.org/InStock"/>
                            <meta t-else="" itemprop="availability" content="http://schema.org/OutOfStock"/>
                        </t>
                        <span itemprop="price" style="display:none;" t-esc="template_price_vals['price_reduce']"/>
                        <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name"/>
                    </span>
                </p>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.extra_info_custom_input" inherit_id="website_sale.extra_info">
        <xpath expr="//input[@id='sale3']" position="replace">
            <input id="sale3" type="file" class="form-control s_website_form_input" name="a_document"
                   style="padding: 0px 0px 0px 10px;font-size: 16px;line-height:30px;"/>
        </xpath>
        <xpath expr="//input[@id='sale1']" position="replace">
            <input id="sale1" type="text" class="form-control s_website_form_input" name="client_order_ref"
                   style="padding: 0px 0px 0px 10px;font-size: 16px;line-height:30px;"/>
        </xpath>
        <xpath expr="//textarea[@id='sale2']" position="replace">
            <textarea id="sale2" class="form-control s_website_form_input" name="Give us your feedback"
                      style="padding: 0px 0px 0px 10px;font-size: 16px;line-height:30px;"/>
        </xpath>
        <xpath expr="//a[@href='/shop/checkout']" position="replace">
            <a role="button" href="/shop/checkout" class="btn round-black-btn float-start">
                <span class="fa fa-chevron-left"/>
                Previous
            </a>
        </xpath>
        <xpath expr="//a[@href='/shop/confirm_order']" position="replace">
            <a role="button" class="btn round-black-btn float-end s_website_form_send" href="/shop/confirm_order">Next
                <span class="fa fa-chevron-right"/>
            </a>
        </xpath>
    </template>

    <template id="cart_btn_custom" inherit_id="website_sale.cart">
        <xpath expr="//div[hasclass('oe_cart')]" position="replace">
            <div class="col-12 oe_cart" t-attf-class="col-12 #{website.sale_get_order() and 'col-xl-8' or ''} oe_cart">
                <div class="row">
                    <div class="col-lg-12">
                        <div t-if="abandoned_proceed or access_token" class="mt8 mb8 alert alert-info"
                             role="alert"> <!-- abandoned cart choices -->
                            <t t-if="abandoned_proceed">
                                <p>Your previous cart has already been completed.</p>
                                <p t-if="website_sale_order">Please proceed your current cart.</p>
                            </t>
                            <t t-if="access_token">
                                <p>This is your current cart.</p>
                                <p>
                                    <strong>
                                        <a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=squash">
                                            Click here
                                        </a>
                                    </strong>
                                    if you want to restore your previous cart. Your current cart will be replaced with
                                    your previous cart.
                                </p>
                                <p>
                                    <strong>
                                        <a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=merge">Click
                                            here
                                        </a>
                                    </strong>
                                    if you want to merge your previous cart into current cart.
                                </p>
                            </t>
                        </div>
                        <t t-call="website_sale.cart_lines"/>
                        <div class="clearfix"/>
                        <div class="d-xl-none mb-2" id="o_cart_summary">
                            <t t-call="website_sale.short_cart_summary"/>
                        </div>
                        <div class="d-flex justify-content-between">

                            <t t-set="redirect_to_sign_in"
                               t-value="website.account_on_checkout == 'mandatory' and website.is_public_user()"/>
                            <t t-set="redirect_url"
                               t-value="'/web/login?redirect=/shop/checkout' if redirect_to_sign_in else '/shop/checkout?express=1'"/>
                            <div class="d-flex flex-column"
                                 t-if="website_sale_order and website_sale_order.website_order_line">
                                <t t-if="redirect_url">
                                    <a t-if="not website_sale_order.is_customisable and not website_sale_order.is_place_inquiry"
                                       class="btn btn-primary float-end width-hide-show mt-2 custom_cart_summary"
                                       role="button"
                                       t-attf-href="{{redirect_url}}">
                                        <t t-if="redirect_to_sign_in">
                                            <span>Sign In</span>
                                        </t>
                                        <t t-else="">
                                            <span>
                                                Place Order
                                            </span>
                                        </t>
                                    </a>
                                </t>
                                <t t-call="payment.express_checkout"/>
                            </div>
                        </div>
                        <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.cart_popover_btn_custom" inherit_id="website_sale.cart_popover">

        <xpath expr="//a[@href='/shop/cart']" position="replace">
            <a role="button" class="btn custom-btn-green" href="/shop/cart">
                View Cart (
                <span class="o_wsale_cart_quantity" t-esc="website_sale_order.cart_quantity"/>
                item(s))
            </a>
        </xpath>

        <xpath expr="//div[hasclass('alert-info')]" position="replace">
            <div t-if="not website_sale_order or not website_sale_order.website_order_line" class="alert alert-info"
                 style="padding:0 !important;">
                <div class="empty-cart">
                    <div class="cart-content cart-popup">
                        <div class="cart-icon">
                            <img src="/cr_web_portal/static/src/images/mech-custom/add-to-cart-2.png" alt="Empty Cart"/>
                        </div>
                        <div class="cart-text">
                            <h6>Your cart is empty!</h6>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.checkout_btn_custom" inherit_id="website_sale.checkout">
        <xpath expr="//div[hasclass('oe_website_sale')]" position="replace">
            <div class="container oe_website_sale py-2">
                <t t-set="same_shipping" t-value="bool(order.partner_shipping_id==order.partner_id or only_services)"/>
                <div class="row shop_cart_flow_page">
                    <div class="col-12">
                        <t t-call="website_sale.wizard_checkout">
                            <t t-set="step" t-value="20"/>
                        </t>
                    </div>
                    <div class="col-12 col-xl-8 oe_cart">
                        <div class="row">
                            <div class="col-lg-12">
                                <h3 class=" mt8">Select Billing Address</h3>
                            </div>
                        </div>
                        <div class="row all_billing">
                            <div class="col-lg-12">
                                <div class="row all_shipping_sec mt8">

                                    <t t-set="billings"
                                       t-value="request.env['res.partner'].sudo().search([('id', 'child_of', order.partner_id.commercial_partner_id.ids),'|', ('type', 'in', ['invoice']), ('id', '=', order.partner_id.commercial_partner_id.id)], order='id desc')"/>
                                    <t t-foreach="billings" t-as="billing">
                                        <div class="col-lg-12 one_kanban mb-2">
                                            <t t-set='contact' t-value="billing"/>
                                            <t t-set='selected' t-value="order.partner_invoice_id.id == billing.id"/>
                                            <t t-set='readonly' t-value="0"/>
                                            <t t-set='allow_edit' t-value="1"/>
                                            <form action="/shop/checkout" method="POST" class="d-none">
                                                <input type="hidden" name="csrf_token"
                                                       t-att-value="request.csrf_token()"
                                                       t-nocache="The csrf token must always be up to date."/>
                                                <input type="hidden" name="partner_id" t-att-value="contact.id"/>
                                                <input type='submit'/>
                                            </form>
                                            <span class="d-none" id="current_order_id" t-att-value="order.id"/>
                                            <div t-attf-class="card card-size #{selected and 'border border-primary border-cart-line' or 'js_change_billing'}"
                                                 t-att-partner="billing.id">
                                                <div class="card-body d-flex align-items-start">
                                                    <div class="checkbox-div">
                                                        <input type="radio"/>
                                                    </div>
                                                    <div class="card-body-content">
                                                        <t t-esc="contact"
                                                           t-options="dict(widget='contact', fields=['name', 'address'], no_marker=True)"/>
                                                        <br/>
                                                        <div class="number-info">
                                                            Mobile number:
                                                            <strong>
                                                                <t t-esc="contact"
                                                                   t-options="dict(widget='contact', fields=['phone'], no_marker=True)"/>
                                                            </strong>
                                                        </div>
                                                        <br/>
                                                        <div class="edit-remove">
                                                            <a role="button" href="#"
                                                               class="button button--secondary js_edit_billing_address edit">
                                                                Edit
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                    <div class="col-md-12 col-lg-12 one_kanban">
                                        <form action="/shop/address" method="post" class='form-add-new'>
                                            <input type="hidden" name="csrf_token"
                                                   t-att-value="request.csrf_token()"
                                                   t-nocache="The csrf token must always be up to date."/>
                                            <input type="hidden" name="new_billing_partner_id"
                                                   t-att-value="new_billing_partner_id"/>
                                            <a role="button" href="#"
                                               class='a_new_billing_submit button button--secondary custom-btn-green-round mb-2 btn-block'>
                                                <i class="fa fa-plus-square"/>
                                                <span>Add New Address</span>
                                            </a>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <t t-if="not only_services" groups="account.group_delivery_invoice_address">
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class=" mt16 mb4">Select Shipping Address</h3>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="row all_shipping all_shipping_sec mt8">
                                    <t t-foreach="shippings" t-as="ship">
                                        <div class="col-md-12 col-lg-12 one_kanban mb-2">
                                            <t t-call="website_sale.address_kanban">
                                                <t t-set='contact' t-value="ship"/>
                                                <t t-set='selected' t-value="order.partner_shipping_id==ship"/>
                                                <t t-set='readonly' t-value="bool(len(shippings)==1)"/>
                                                <t t-set='edit_billing' t-value="bool(ship==order.partner_id)"/>
                                                <t t-set="allow_edit"
                                                   t-value="not order.partner_id or (ship.id in order.partner_id.child_ids.ids)"/>
                                            </t>
                                        </div>
                                    </t>
                                    <div class="col-md-12 col-lg-12 one_kanban">
                                        <form action="/shop/address" method="post" class=''>
                                            <input type="hidden" name="csrf_token"
                                                   t-att-value="request.csrf_token()"
                                                   t-nocache="The csrf token must always be up to date."/>
                                            <a role="button" href="#"
                                               class='a-submit btn button button--secondary mb-2 btn-block w-100'>
                                                <i class="fa fa-plus-square"/>
                                                <span>Add New Address</span>
                                            </a>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </t>
                        <div class="d-flex justify-content-between mt-3">
                            <a role="button" href="/shop/cart" class="btn btn-primary mb32">
                                <span>Return to Cart</span>
                            </a>
                            <a role="button" href="/shop/confirm_order" class="btn btn-primary mb32">
                                <span>Confirm</span>
                            </a>
                        </div>
                    </div>
                    <div class="d-none d-xl-block col-xl-4">
                        <t t-call="website_sale.cart_summary">
                            <t t-set="redirect" t-valuef="/shop/checkout"/>
                        </t>
                    </div>

                </div>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.payment_footer_btn_custom" inherit_id="website_sale.payment_footer">
        <xpath expr="//div[hasclass('float-start')]" position="replace">
            <div class="float-start mt-2">
                <a role="button" href="/shop/cart" class="btn btn-primary">
                    Return to Cart
                </a>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('float-end')]" position="replace">
            <t t-if="order.is_customisable or order.is_place_inquiry">
                <div class="float-end show_in_mobile mt-2">
                    <a role="button" t-attf-href="/customise_order_confirm/{{order.id}}"
                       class="btn btn-primary">
                        Place Inquiry
                    </a>
                </div>
            </t>
            <t t-else="">
                <div class="float-end mt-2">
                    <button name="o_payment_submit_button" type="submit" class="btn btn-primary"
                            disabled="true" data-icon-class="fa-chevron-right">
                        <t t-esc="submit_button_label"/>
                    </button>
                </div>
            </t>
        </xpath>
    </template>

    <template id="cr_web_portal.reduction_code_hide_custom" inherit_id="website_sale.reduction_code">
        <xpath expr="//td[@colspan='3']" position="attributes">
            <attribute name="class">text-center text-xl-end border-0 d-none</attribute>
        </xpath>
    </template>

    <template id="cr_web_portal.optional_product_items_custom_btn"
              inherit_id="sale_product_configurator.optional_product_items">
        <xpath expr="//a[hasclass('btn-primary')]" position="replace">
            <a role="button" href="#" class="js_add btn custom-btn-green-without-margin btn-sm">
                <i class="fa fa-shopping-cart add-optionnal-item"></i>
                Add to Cart
            </a>
        </xpath>
        <xpath expr="//a[hasclass('js_remove')]" position="replace">
            <a role="button" href="#" class="js_remove btn custom-btn-green-without-margin mt-1">
                <i class="fa fa-trash-o remove-optionnal-item"></i>
            </a>
        </xpath>
    </template>

    <template id="cr_web_portal.product_quantity_config_custom_btn"
              inherit_id="sale_product_configurator.product_quantity_config">
        <xpath expr="//div[hasclass('css_quantity')]" position="replace">
            <div class="css_quantity input-group">
                <button t-attf-href="#"
                        class="btn custom-btn-green-without-margin float_left js_add_cart_json d-none d-md-inline-block"
                        aria-label="Remove one" title="Remove one">
                    <i class="fa fa-minus"></i>
                </button>
                <input type="text"
                       class="js_quantity form-control quantity text-center"
                       style="max-width: 4rem"
                       data-min="1"
                       name="add_qty"
                       t-att-value="add_qty or 1"/>
                <button t-attf-href="#"
                        class="btn custom-btn-green-without-margin float_left js_add_cart_json d-none d-md-inline-block"
                        aria-label="Add one" title="Add one">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </xpath>
    </template>

    <template id="website_sale_stock_cart_lines_custom_attribute"
              inherit_id="website_sale_stock.website_sale_stock_cart_lines">
        <xpath expr="//input[@type='text'][hasclass('quantity')]" position="attributes">
            <attribute name='t-att-data-max'></attribute>
        </xpath>
    </template>

    <template id="cr_web_portal.portal_searchbar_custom_btn" inherit_id="portal.portal_searchbar">
        <xpath expr="//form[@t-if='searchbar_inputs']" position="replace">
            <form t-if="searchbar_inputs" class="o_portal_search_panel ms-lg-4 col-xl-4 col-md-5">
                <div class="input-group input-group-sm w-100">
                    <button type="button" class="btn custom-btn-green-without-margin dropdown-toggle"
                            data-bs-toggle="dropdown"/>
                    <div class="dropdown-menu" role="menu">
                        <t t-foreach='searchbar_inputs' t-as='input'>
                            <a t-att-href="'#' + input_value['input']"
                               t-attf-class="dropdown-item#{search_in == input_value['input'] and ' active' or ''}">
                                <span t-out="input_value['label']"/>
                            </a>
                        </t>
                    </div>
                    <input type="text" class="form-control form-control-sm" placeholder="Search" t-att-value='search'
                           name="search"/>
                    <button class="btn custom-btn-green-without-margin o_wait_lazy_js" type="submit">
                        <span class="fa fa-search"/>
                    </button>
                </div>
            </form>
        </xpath>
        <xpath expr="//button[hasclass('navbar-toggler')]" position="replace">
            <div class="portal-search-header d-none">
                <t t-if="'/my/quotes' in request.httprequest.path">
                    <h2 class="dashboard-title">
                        <a href="/my" class="title-img">
                            <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                        </a>
                        Quotations
                    </h2>
                </t>
                <t t-elif="'/my/orders' in request.httprequest.path">
                    <h2 class="dashboard-title">
                        <a href="/my" class="title-img">
                            <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                        </a>
                        Sale Order
                    </h2>
                </t>
                <t t-elif="'/my/inquiry/quotes' in request.httprequest.path">
                    <h2 class="dashboard-title">
                        <a href="/my" class="title-img">
                            <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                        </a>
                        Inquiries
                    </h2>
                </t>
                <t t-elif="'/my/invoices' in request.httprequest.path">
                    <h2 class="dashboard-title">
                        <a href="/my" class="title-img">
                            <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                        </a>
                        Invoices &amp; Bills
                    </h2>
                </t>
            </div>
            <div t-if="searchbar_sortings">
                <div class="btn-group">
                    <button id="portal_searchbar_sortby" data-bs-toggle="dropdown"
                            class="d-flex text-center align-center btn-secondary-font-small btn-sm dropdown-toggle">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/sort.svg"/>
                        Sort By :
                        <t t-esc="searchbar_sortings[sortby].get('label', 'Newest')"/>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="portal_searchbar_sortby">
                        <t t-foreach="searchbar_sortings" t-as="option">
                            <a t-att-href="request.httprequest.path + '?' + keep_query('*', sortby=option)"
                               t-attf-class="dropdown-item#{sortby == option and ' active' or ''}">
                                <span t-esc="searchbar_sortings[option].get('label')"/>
                            </a>
                        </t>
                    </div>
                </div>
            </div>
            <div t-if="searchbar_filters" class="ms-lg-2">
                <div class="btn-group">
                    <button id="portal_searchbar_filters" data-bs-toggle="dropdown"
                            class="btn-secondary-font-small btn-sm dropdown-toggle">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/sort.svg"/>
                        Filter By :
                        <t t-esc="searchbar_filters.get(filterby,searchbar_filters.get('all')).get('label', 'All')"/>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="portal_searchbar_filters">
                        <t t-foreach="searchbar_filters" t-as="option">
                            <a t-att-href="default_url + '?' + keep_query('*', filterby=option)"
                               t-attf-class="dropdown-item#{filterby == option and ' active' or ''}">
                                <span t-esc="searchbar_filters[option].get('label')"/>
                            </a>
                        </t>
                    </div>
                </div>
            </div>
            <div t-if="searchbar_groupby" class="ms-lg-2">
                <div class="btn-group">
                    <button id="portal_searchbar_groupby" data-bs-toggle="dropdown"
                            class="btn-secondary-font-small btn-sm dropdown-toggle">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/sort.svg"/>
                        Group By :
                        <t t-esc="searchbar_groupby[groupby].get('label', 'None')"/>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="portal_searchbar_groupby">
                        <t t-foreach="searchbar_groupby" t-as="option">
                            <a t-att-href="default_url + '?' + keep_query('*', groupby=option)"
                               t-attf-class="dropdown-item#{groupby == option and ' active' or ''}">
                                <span t-esc="searchbar_groupby[option].get('label')"/>
                            </a>
                        </t>
                    </div>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('navbar-collapse')]" position="replace">
        </xpath>
    </template>

     <template id="mp_sidebar_portal_layout" inherit_id="portal.portal_record_sidebar">
        <xpath expr="//div[1]" position="replace">
            <!--         New Portal Sidebar Layout-->
            <div class=" col-12 col-md col-lg-3">
                <t t-call="cr_web_portal.portal_sidebar_custom">
                    <t t-if="request.httprequest.referrer is not None" >
                        <t t-if="'/my/quotes' in request.httprequest.referrer" t-set="order_breadcumb_name" t-value="'Quotation'"/>
                        <t t-else="" t-set="order_breadcumb_name" t-value="'Sales Order'"/>
                    </t>
                    <t t-if="sale_order">
                        <t t-set="salesperson" t-value="sale_order.user_id"/>
                    </t>
                    <t t-elif="">
                        <t t-set="salesperson" t-value="quotation.user_id"/>
                    </t>
                </t>
            </div>
        </xpath>
     </template>

    <template id="cr_custom_transaction_status" inherit_id="payment.transaction_status">
        <xpath expr="//div[@id='o_payment_status_alert']" position="replace">
            <div t-if="status_message or tx.state_message"
                 id="o_payment_status_alert"
                 t-attf-class="alert alert-{{alert_style}} alert-dismissible">
                <button class="btn-close" data-bs-dismiss="alert" title="Dismiss"/>
                <t t-if="tx.state == 'pending'">
                    <div>
                        <h6>Please use the following transfer details</h6>
                        <div class="row">
                            <div class="col-12 col-lg-6">
                                <p>Bank Account</p>
                                <p class="bank-info">25480145563024 - HDFC BANK LTD.</p>
                            </div>
                            <div class="col-12 col-lg-6">
                                <p>Communication</p>
                                <p class="bank-info">Please use the order name as communication reference. Communication
                                    -
                                    <t t-esc="sale_order.name"/>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
                <t t-else="">
                    <t t-if="status_message" t-out="status_message"/>
                    <t t-if="tx.state_message" t-out="tx.state_message"/>
                </t>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.sale_order_portal_template_custom" inherit_id="sale.sale_order_portal_template">

        <xpath expr="//t[@t-set='o_portal_fullwidth_alert']" position="replace">
        </xpath>
        <!--  Hide Portal Chatter in Bottom for new design appearance   -->
        <xpath expr="//div[@id='sale_order_communication']" position="replace">
        </xpath>
        <!-- Portal Object Detail Page Breabcumb -->
        <xpath expr="//div[@id='modalaccept']" position="before">
            <h2 class="dashboard-title d-none">
                <t t-if="sale_order.state in ('sent')">
                    <a href="/my/quotes" class="title-img">
                        <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                    </a>
                </t>
                <t t-else="">
                    <a href="/my/orders" class="title-img">
                        <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                    </a>
                </t>
               <t t-esc="sale_order.name"/>
            </h2>
            <nav class="navbar navbar-light navbar-expand-lg border py-0 o_portal_navbar rounded">
                <ol class="o_portal_submenu breadcrumb mb-0 py-2 flex-grow-1">
                    <li class="breadcrumb-item ms-1">
                        <a href="/my/home" aria-label="Dashboard" title="Dashboard">
                            Dashboard
                        </a>
                    </li>
                    <img src="/cr_web_portal/static/src/images/new_design_resource/black-arrow-right.svg" width="20" height="20" style="margin: 0px 10px;" loading="lazy"/>
                    <li class="breadcrumb-item">
                        <t t-if="sale_order.state in ['sent']">
                            <t t-set="order_breadcrumb_name" t-value="'Quotation'"/>
                            <t t-set="order_href" t-value="'/my/quotes'"/>
                        </t>
                        <t t-else="">
                            <t t-set="order_breadcrumb_name" t-value="'Sales Order'"/>
                            <t t-set="order_href" t-value="'/my/orders'"/>
                        </t>
                        <a t-att-href="order_href" t-att-aria-label="order_breadcrumb_name"
                           t-att-title="order_breadcrumb_name">
                            <t t-out="order_breadcrumb_name"/>
                        </a>
                    </li>
                    <img src="/cr_web_portal/static/src/images/new_design_resource/black-arrow-right.svg" width="20" height="20" style="margin: 0px 10px;" loading="lazy"/>
                    <li class="breadcrumb-item active">
                        <t t-out="sale_order.name"/>
                    </li>
                </ol>
            </nav>
        </xpath>
        <!-- Remove Extra necessary Class from this <div id='portal_sale_content'/>   -->
        <xpath expr="//div[@id='portal_sale_content']" position="replace">
            <div id="portal_sale_content">
                <div t-call="sale.sale_order_portal_content"/>
            </div>
        </xpath>



        <xpath expr="//div[@id='quote_content']//div[hasclass('justify-content-center')]" position="replace">
            <div t-if="sale_order._has_to_be_signed(True) or sale_order._has_to_be_paid(True)"
                 class="d-flex quote_footer justify-content-end text-center d-print-none pt-1 pb-4">

                <t t-if="sale_order._has_to_be_signed(True)">
                    <div class="">
                        <a role="button" class="pay_now_btn" data-bs-toggle="modal"
                           data-bs-target="#modalaccept" href="#" style="display: flex; justify-content: center; align-items: center;">
                            <t t-if="sale_order._has_to_be_paid(True)">Sign &amp; Pay</t>
                            <t t-elif="sale_order.payment_term_id and sale_order.payment_term_id.is_advance_payment">
                                Accept &amp; Pay
                            </t>
                            <t t-elif="sale_order.payment_term_id and not sale_order.payment_term_id.is_advance_payment">
                                Accept &amp; Pay
                            </t>
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"/>
                        </a>
                    </div>
                    <div class="">
                        <a role="button" class="reject_now_btn"
                           data-bs-toggle="modal" data-bs-target="#modaldecline" href="#" style="display: flex; justify-content: center; align-items: center;">
                            Reject
                            <img src="/cr_web_portal/static/src/images/new_design_resource/close-circle.svg"/>
                        </a>
                    </div>
                </t>
                <div t-elif="sale_order._has_to_be_paid(True)" class="col-sm-auto mt8">
                    <a role="button" data-bs-toggle="modal" data-bs-target="#modalaccept" href="#"
                       t-att-class="'%s' % ('btn custom-btn-green-round-without-margin' if sale_order.transaction_ids else 'btn custom-btn-green-round-without-margin')">
                        <i class="fa fa-check"/>
                        <t t-if="not sale_order.signature">Accept &amp; Pay</t>
                        <t t-else="">Pay Now</t>
                    </a>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[@id='modaldecline']" position="replace">
            <div role="dialog" class="modal fade" id="modaldecline">
                <div class="modal-dialog">
                    <form id="decline" method="POST" t-attf-action="/my/orders/#{sale_order.id}/decline?access_token=#{sale_order.access_token}" class="modal-content">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <header class="modal-header">
                            <h4 class="modal-title">Reject This Quotation</h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="display: flex; justify-content: center; align-items: center;">
                                <img src="/cr_web_portal/static/src/images/new_design_resource/black-close-circle.svg" width="20" height="20"/>
                            </button>
                        </header>
                        <main class="modal-body">
                            <p>
                                Tell us why you are refusing this quotation, this will help us improve our services.
                            </p>
                            <textarea rows="4" name="decline_message" required="" placeholder="Your feedback..." class="form-control" />
                        </main>
                        <footer class="modal-footer">
                            <button type="submit" t-att-id="sale_order.id" class="btn btn-danger" style="display: flex; justify-content: center; align-items: center;">
                                Reject <img src="/cr_web_portal/static/src/images/new_design_resource/close-circle.svg"/>
                            </button>
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                                Cancel
                            </button>
                        </footer>
                    </form>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[@id='modalaccept']" position="replace">
            <div role="dialog" class="modal fade" id="modalaccept">
                <div class="modal-dialog" t-if="sale_order._has_to_be_signed(True)">
                    <form id="accept" method="POST" t-att-data-order-id="sale_order.id"
                          t-att-data-token="sale_order.access_token"
                          class="js_accept_json modal-content js_website_submit_form">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <header class="modal-header">
                            <h5 class="modal-title">Validate Order</h5>
                            <button type="button" data-bs-dismiss="modal" aria-label="Close">
                                <img src="/cr_web_portal/static/src/images/new_design_resource/black-close-circle.svg" width="20" height="20"/>
                            </button>
                        </header>
                        <main class="modal-body" id="sign-dialog">
                            <p>
                                <div class="portal_obj_value">By signing this proposal, I agree to the following terms:</div>
                                <ul>
                                    <li>
                                        <div class="portal_grey">Accepted on the behalf of:</div>
                                        <div class="portal_obj_value"> <b t-field="sale_order.partner_id.commercial_partner_id"/></div>
                                    </li>
                                    <li>
                                        <div class="portal_grey">For an amount of:</div>
                                        <div class="portal_obj_value"><b data-id="total_amount" t-field="sale_order.amount_total"/></div>
                                    </li>
                                    <li t-if="sale_order.client_order_ref">
                                        <div class="portal_grey">Purchase Order No:</div>
                                        <div class="portal_obj_value"><b t-field="sale_order.client_order_ref"/></div>
                                    </li>
                                    <li t-else="">
                                        <div class="portal_grey">Purchase Order No:</div>
                                        <input type="text" id="purchase_order_no" name="Purchase_order_no" required="required"/>
                                    </li>
                                    <li t-if="sale_order.x_studio_purchase_order_copy">
                                        <div class="portal_grey" ><span class="o_input_required">Purchase Order: </span></div>
                                        <a t-attf-href="/web/content/sale.order/#{sale_order.id}/x_studio_purchase_order_copy?download=true"
                                           aria-label="Download Purchase Order" class="file-button"
                                           title="download" href="">
                                            <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                            <span class="portal_obj_value">
                                                <t t-esc="sale_order.x_studio_purchase_order_copy_filename"/>
                                            </span>
                                        </a>
                                    </li>
                                    <li t-else="">
                                        <div class="portal_grey">Upload Purchase Order:</div>
                                        <input type="file" multiple="true"
                                               accept="application/pdf, application/x-pdf, application/vnd.cups-pdf"
                                               id="purchase_order" required="required"/>
                                    </li>
                                </ul>
                            </p>
                            <t t-call="portal.signature_form">
                                <t t-if="sale_order.payment_term_id and sale_order.payment_term_id.is_advance_payment">
                                    <t t-set="send_label">Accept &amp; Pay</t>
                                </t>
                                <t t-if="sale_order.payment_term_id and not sale_order.payment_term_id.is_advance_payment">
                                    <t t-set="send_label">Accept &amp; Pay</t>
                                </t>
                                <t t-set="call_url" t-value="sale_order.get_portal_url(suffix='/accept')"/>
                                <t t-set="default_name" t-value="sale_order.partner_id.name"/>
                            </t>
                        </main>
                    </form>
                </div>
            </div>
            <div role="dialog" class="modal fade" id="modalaccept1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <header class="modal-header">
                            <h5 class="modal-title"> Validate Order</h5>
                            <button type="button" data-bs-dismiss="modal" aria-label="Close">
                                <img src="/cr_web_portal/static/src/images/new_design_resource/black-close-circle.svg" width="20" height="20"/>
                            </button>
                        </header>
                        <main class="modal-body" id="sign-dialog">
                            <p>
                                <div class="portal_obj_value">By paying this proposal, I agree to the following terms:</div>
                                <ul>
                                    <li>
                                        <div class="portal_grey">Accepted on the behalf of:</div>
                                        <div class="portal_obj_value"><b t-field="sale_order.partner_id.commercial_partner_id"/></div>
                                    </li>
                                    <li>
                                        <div class="portal_grey">For an amount of:</div>
                                        <div class="portal_obj_value">
                                            <t t-if="sale_order.is_remaining_amount()">
                                                <b data-id="total_amount" t-esc="sale_order.is_remaining_amount()"/>
                                            </t>
                                            <t t-else="">
                                                <b data-id="total_amount" t-field="sale_order.amount_total"/>
                                            </t>
                                        </div>
                                    </li>
                                </ul>
                            </p>
                            <div t-if="sale_order and sale_order.payment_term_id and sale_order.payment_term_id.is_advance_payment and not sale_order.is_remaining_amount()"
                                 class="amount_of_payable mb-3">
                                <div class="d-grid justify-content-between">
                                    <div class="text-start portal_grey border-bottom-0">
                                        <strong
                                                class="p-0">Advance payment
                                        </strong>
                                        <div t-if="not (sale_order.is_customisable or sale_order.is_place_inquiry)">
                                            <div class="summary_payment_term">
                                                <t t-esc="sale_order.payment_term_id.name"/>
                                                . As per payment terms.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-start mp_input_field_web border-bottom-0 p-0">
                                        <input type="number"
                                               name="payable_amount"
                                               step="0.01"
                                               style="text-align: left !important;"
                                               class="check_digits_quantity portal_payable_amount form_input s_website_form_input"
                                               t-att-min="'%.2f' % (order_pp[sale_order.id]['payable_amount']['min'])"
                                               t-att-max="'%.2f' % (order_pp[sale_order.id]['payable_amount']['max'])"
                                               t-att-value="'%.2f' % order_pp[sale_order.id]['payable_amount']['min']"/>
                                    </div>
                                </div>
                            </div>
                            <div t-if="providers or tokens" id="payment_method" class="text-start payment_provider_section">
                                <t t-call="payment.checkout">
                                    <t t-set="order" t-value="sale_order"/>
                                    <t t-if="sale_order.is_remaining_amount()">
                                        <t t-set="amount" t-value="sale_order.is_remaining_amount()"/>
                                    </t>
                                </t>
                            </div>
                            <div t-else="" class="alert alert-warning">
                                <strong>No suitable payment option could be found.</strong>
                                <br/>
                                If you believe that it is an error, please contact the website administrator.
                            </div>
                        </main>
                    </div>
                </div>
            </div>
            <t t-if="sale_order.can_reorder()">
                <div role="dialog" class="modal fade" t-attf-id="reorder_popup_{{sale_order.id}}">
                    <div class="modal-dialog modal-lg re-order-popup">
                        <form method="POST" action="/make/reorder" class="modal-content" t-att-data-id="sale_order.id"
                              t-att-id="sale_order.id">
                            <div class="bg-white">
                                <header class="modal-header">
                                    <h5 class="modal-title">Re-Order</h5>
                                    <button type="button" data-bs-dismiss="modal" aria-label="Close">
                                        <img src="/cr_web_portal/static/src/images/new_design_resource/black-close-circle.svg"
                                             width="20" height="20"/>
                                    </button>
                                </header>
                                <main class="modal-body">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <div class="row" style="margin-right: auto;">
                                        <div class="col-12 col-lg-8 sale_tbody">
                                            <t t-set="orderline_ids"
                                                   t-value="sale_order.get_reorderable_orederline()"/>
                                            <t t-foreach="orderline_ids" t-if="orderline_ids" t-as="line">
                                                <div class="row mb-10 align-items-center" t-att-id="'line_%s'%line.id">
                                                    <div class="d-none text-end" t-attf-id="price_unit_{{line.id}}">
                                                            <t t-if="line.price_unit" t-esc="line.price_unit"/>
                                                        </div>
                                                    <div class="d-none text-end" t-attf-id="price_subtotal_{{line.id}}">
                                                            <t t-if="line.price_subtotal" t-out="line.price_subtotal"
                                                               t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                                        </div>
                                                    <div class="col-2">
                                                        <t t-set="image_holder" t-value="line.product_id._get_image_holder()"/>
                                                        <div class="reorder_product_img" t-field="image_holder.image_1920" t-options='{"widget": "image"}'/>
                                                    </div>
                                                    <div class="col-6">
                                                        <span class="reorder_product_name" t-field="line.product_id.display_name"/>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="quantity-control d-flex justify-content-between">
                                                            <button type="button" class="btn btn-sm btn-outline-secondary" t-att-id="'line_%s'%line.id"
                                                                    onclick="updateQuantity(this, -1)"><i class="fa fa-minus" style="color:#787878;"></i>
                                                            </button>
                                                            <t t-if="line.product_uom_qty">
                                                                <input  t-attf-name="orderline_qty_{{line.id}}" class="jsOnchangeQty reorder_qty" t-att-id="line.id"
                                                                        t-att-value="int(line.product_uom_qty)" min="1"/>
                                                            </t>
                                                            <t t-else="">
                                                                <input  t-attf-name="orderline_qty_{{line.id}}" class="jsOnchangeQty reorder_qty" t-att-id="line.id"
                                                                        t-att-value="1" min="1"/>
                                                            </t>
                                                            <button type="button" class="btn btn-sm btn-outline-secondary" t-att-id="'line_%s'%line.id"
                                                                    onclick="updateQuantity(this, 1)"><i class="fa fa-plus" style="color:#787878;"></i>
                                                            </button>

                                                        </div>
                                                    </div>
                                                    <div class="col-1">
                                                        <a href="#" aria-label="Remove from Order"
                                                           title="Remove from Order"
                                                           class="js_delete_product_from_reorder no-decoration"
                                                           t-att-id="line.id">
                                                            <img src="/cr_web_portal/static/src/images/new_design_resource/trash.svg"
                                                                 t-att-id="line.id" width="24px" height="24px"/>
                                                        </a>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                        <div class="col-12 col-lg-4 cart_summary_card">
                                            <h4 class="cart_summary_card_title">Price Details</h4>
                                            <div class="d-flex justify-content-between">
                                                <div class="text-start div-cell border-0 p-0">
                                                    Total Amount:
                                                </div>
                                                <div class="text-xl-end div-cell border-0 p-0"
                                                     style="font-size: larger !important;">₹
                                                    <span t-field="line.price_subtotal"
                                                          class="reorder_total_amount"
                                                          style="white-space: nowrap;"
                                                          />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </main>
                                <footer class="modal-footer">
                                    <a class="btn btn-primary popup_btn popupSubmitBtn"
                                       t-attf-id="submitBtn{{sale_order.id}}" href="#">Submit
                                        <img src="/cr_web_portal/static/src/img/shopping-cart.png" width="16"
                                             height="16" loading="lazy" />
                                    </a>
                                    <button type="button" class="btn btn-secondary popup_btn" data-bs-dismiss="modal">
                                        Cancel
                                    </button>
                                </footer>
                            </div>
                        </form>
                    </div>
                </div>
                <script>
                    function updateQuantity(button, change) {
                        const inputElement = button.parentElement.querySelector('.reorder_qty');
                        let quantity = parseInt(inputElement.value) || 1; // Parse the input value, default to 1 if invalid
                        quantity = Math.max(1, quantity + change); // Prevent quantity from going below 1
                        inputElement.value = quantity; // Update the input value
                        $('.reorder_qty').change()
                    }
                </script>
            </t>
        </xpath>
    </template>


    <template id="cr_web_portal.cart_line_description_following_lines_custom_internal_ref"
              inherit_id="website_sale.cart_line_description_following_lines">
        <xpath expr="//div[@t-if='description_lines']" position="before">
            <t t-if="line.product_id.default_code">
                <span t-esc="line.product_id.default_code" style="font-size:14px;"/>
            </t>
        </xpath>
        <xpath expr="//div[@t-if='description_lines']" position="after">
            <t t-if="not line.order_id.is_customisable">
                <t t-if="(int(line.product_id.qty_available) - int(line.product_uom_qty)) &lt; 0 and not line.product_id.allow_out_of_stock_order">
                    <span class="alert alert-danger d-block mt-1" style="font-size: 14px;">The product you're interested
                        in is currently unavailable in the desired quantity. Expect a lead time of
                        <t t-if="line.product_id.sale_delay" t-esc="int(line.product_id.sale_delay)"/>
                        days for delivery.
                    </span>
                </t>
            </t>
        </xpath>
    </template>

    <template id="cr_web_portal.address_on_payment_custom" inherit_id="website_sale.address_on_payment">
        <xpath expr="//div[hasclass('card')]" position="replace">
            <div class="white_card_cart_summary cart_summary" id="shipping_and_billing">
                <a class="float-end show_in_laptop change_address_btn btn btn-secondary no-decoration"
                   href="/shop/checkout">Change Address
                </a>
                <t t-set="same_shipping"
                   t-value="bool(order.partner_shipping_id==order.partner_invoice_id or only_services)"/>
                <div class="mb24">
                    <p class="card_address_title_bar">Billing<t t-if="same_shipping and not only_services">&amp;
                        Shipping Address
                    </t>
                        <t t-else="">Address</t>:
                    </p>
                    <div class="card_address_inline_bar">
                        <span t-esc="order.partner_invoice_id"
                              t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"/>
                    </div>
                </div>
                <div class="mb24" t-if="not same_shipping and not only_services"
                     groups="account.group_delivery_invoice_address">
                    <p class="card_address_title_bar">Shipping Address:</p>
                    <div class="card_address_inline_bar">
                        <span t-esc="order.partner_shipping_id"
                              t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"/>
                    </div>
                </div>
                <a class="show_in_mobile change_address_btn btn btn-secondary no-decoration mt-3" href="/shop/checkout">
                    Change Address
                </a>
            </div>
        </xpath>
    </template>

    <template id="cr_web_portal.confirmation_address_on_payment_custom" inherit_id="website_sale.confirmation">
        <xpath expr="//div[@id='wrap']" position="replace">
            <div id="wrap">
                <div class="container oe_website_sale py-2">
                    <div class="row order_confirm_page">
                        <div class='col-12'>
                            <t t-call="website_sale.wizard_checkout">
                                <t t-set="step" t-value="60"/>
                            </t>
                        </div>
                        <div class="col-12">
                            <div class="oe_cart">
                                <t t-set="payment_tx_id" t-value="order.get_portal_last_transaction()"/>
                                <div t-attf-class="order_confirmation_box">
                                    <t t-if="order.is_customisable or order.is_place_inquiry">
                                        <img t-if="order.is_customisable"
                                             src="/cr_web_portal/static/src/images/new_design_resource/confirmation.gif"
                                             class="order_confirm_img"/>
                                        <h3 class="order_confirmation_title">
                                            Inquiry Confirmed (<t t-out="order.name"/>)
                                        </h3>
                                        <p class="order_confirmation_description">Thanks for your
                                            <t t-if="order.is_customisable">inquiry</t>
                                            <t t-else="">order</t>! We’re processing it and will update you with
                                            shipping details soon.
                                        </p>
                                    </t>
                                    <t t-else="">
                                        <img t-if="order.state == 'sale' and payment_tx_id.state not in ['cancel','error'] "
                                             src="/cr_web_portal/static/src/images/new_design_resource/confirmation.gif"
                                             class="order_confirm_img"/>
                                        <img t-if="not order.is_customisable and not order.is_place_inquiry and order.state in ['cancel','error']"
                                             src="/cr_web_portal/static/src/images/new_design_resource/payment_error.gif"
                                             class="order_confirm_img"/>
                                        <t t-if="order.state == 'sale' and not order.is_customisable">
                                            <h3 class="order_confirmation_title">
                                                Order Confirmed (<t t-out="order.name"/>)
                                            </h3>
                                        </t>
                                        <t t-if="payment_tx_id.state in ['cancel','error']">
                                            <div class="payment-failed-container">
                                                <div class="icon">
                                                    <img src="/cr_web_portal/static/src/images/new_design_resource/payment_error.gif"/>
                                                </div>
                                                <h1>Payment Failed: Order Not Processed</h1>
                                                <p>
                                                    Please verify your payment details, ensure sufficient funds, and try
                                                    again.
                                                    For further assistance, consider using another payment method or
                                                    contacting your bank.
                                                </p>
                                            </div>
                                        </t>
                                        <t t-else="">
                                            <p class="order_confirmation_description">Thanks for your
                                                <t t-if="order.is_customisable">inquiry</t>
                                                <t t-else="">order</t>! We’re processing it and will update you with
                                                shipping details soon.
                                            </p>
                                        </t>
                                        <div class="order_confirmed_order_line_section">
                                            <t t-foreach="order.website_order_line" t-as="line">
                                                <div class="col-lg-12 d-flex cart_order_line">
                                                    <t t-if="line.product_id">
                                                        <div class="shop_cart_product_img col-lg-2">
                                                            <t t-set="image_holder"
                                                               t-value="line.product_id._get_image_holder()"/>
                                                            <div t-if="line._is_not_sellable_line() and line.product_id.image_128">
                                                                <img t-att-src="image_data_uri(line.product_id.image_128)"
                                                                     class="img o_image_64_max rounded"
                                                                     t-att-alt="line.name_short"/>
                                                            </div>
                                                            <div t-else="" t-field="image_holder.image_1920"
                                                                 t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}"/>
                                                        </div>
                                                        <div class="shop_cart_product_details col-lg-10">
                                                            <div t-if="len(line.product_id.public_categ_ids) &gt; 0"
                                                                 class="product_tmp_category_name">
                                                                <t t-foreach="line.product_id.public_categ_ids"
                                                                   t-as="product_category">
                                                                    <t t-esc="product_category.name"/>
                                                                </t>
                                                            </div>
                                                            <div class="d-flex justify-content-between align-center">
                                                                <div class="product_line_product_name">
                                                                    <div class='td-product_name'>
                                                                        <t t-out="line.name_short"/>
                                                                    </div>
                                                                </div>
                                                                <div class="product-price-discount show_in_laptop"
                                                                     t-if="not order.is_customisable and not order.is_place_inquiry">
                                                                    <t t-set="combination_info"
                                                                       t-value="line.product_id._get_combination_info_variant(add_qty=int(line.product_uom_qty),pricelist=order.pricelist_id)"/>
                                                                    <t t-if="combination_info">
                                                                        <h5 class="css_editable_mode_hidden">
                                                                            <span class="oe_price"
                                                                                  style="white-space: nowrap;"
                                                                                  t-esc="combination_info['price']"
                                                                                  t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                                                            <span itemprop="price" style="display:none;"
                                                                                  t-esc="combination_info['price']"/>
                                                                            <span itemprop="priceCurrency"
                                                                                  style="display:none;"
                                                                                  t-esc="website.currency_id.name"/>
                                                                            <span t-attf-class="text-danger oe_default_price ms-1 h5 {{'' if combination_info['has_discounted_price'] and not combination_info['compare_list_price'] else 'd-none'}}"
                                                                                  style="text-decoration: line-through; white-space: nowrap;"
                                                                                  t-esc="combination_info['list_price']"
                                                                                  t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"
                                                                                  itemprop="listPrice"
                                                                            />
                                                                            <t t-if="is_view_active('website_sale.tax_indication')"
                                                                               t-call="website_sale.tax_indication"/>
                                                                            <del t-if="combination_info['compare_list_price'] and (combination_info['compare_list_price'] &gt; combination_info['price'])">
                                                                                <bdi dir="inherit">
                                                                                    <span t-esc="combination_info['compare_list_price']"
                                                                                          groups="website_sale.group_product_price_comparison"
                                                                                          t-options='{"widget": "monetary","display_currency": website.currency_id,}'/>
                                                                                </bdi>
                                                                            </del>
                                                                            <t t-if="line.product_uom">/<t t-esc="line.product_uom.name"/></t>
                                                                        </h5>
                                                                        <h5 class="css_non_editable_mode_hidden decimal_precision"
                                                                            t-att-data-precision="str(website.currency_id.decimal_places)">
                                                                            <span t-field="line.product_id.list_price"
                                                                                  t-options='{"widget": "monetary","display_currency": line.product_id.currency_id,}'/>
                                                                            <t t-if="is_view_active('website_sale.tax_indication')"
                                                                               t-call="website_sale.tax_indication"/>
                                                                            <del t-if="combination_info['compare_list_price'] and (combination_info['compare_list_price'] &gt; combination_info['price'])">
                                                                                <bdi dir="inherit">
                                                                                    <span t-field="line.product_id.compare_list_price"
                                                                                          groups="website_sale.group_product_price_comparison"
                                                                                          t-options='{"widget": "monetary","display_currency": website.currency_id,}'/>
                                                                                </bdi>
                                                                            </del>
                                                                            <t t-if="line.product_uom">/<t t-esc="line.product_uom.name"/></t>
                                                                        </h5>
                                                                    </t>
                                                                </div>
                                                            </div>
                                                            <p class="default_code" t-if="line.product_id.default_code"
                                                               t-out="line.product_id.default_code"/>

                                                            <div class="product_line_qty_cart_summary">
                                                                <t t-if="line.product_uom_qty">Qty:
                                                                    <t t-out="int(line.product_uom_qty)"/>
                                                                </t>
                                                            </div>
                                                            <div class="product-price-discount show_in_mobile"
                                                                 t-if="not order.is_customisable">
                                                                <t t-set="combination_info"
                                                                   t-value="line.product_id._get_combination_info_variant(add_qty=int(line.product_uom_qty),pricelist=order.pricelist_id)"/>
                                                                <t t-if="combination_info">
                                                                    <h5 class="css_editable_mode_hidden">
                                                                        <span class="oe_price"
                                                                              style="white-space: nowrap;"
                                                                              t-esc="combination_info['price']"
                                                                              t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                                                        <span itemprop="price" style="display:none;"
                                                                              t-esc="combination_info['price']"/>
                                                                        <span itemprop="priceCurrency"
                                                                              style="display:none;"
                                                                              t-esc="website.currency_id.name"/>
                                                                        <span t-attf-class="text-danger oe_default_price ms-1 h5 {{'' if combination_info['has_discounted_price'] and not combination_info['compare_list_price'] else 'd-none'}}"
                                                                              style="text-decoration: line-through; white-space: nowrap;"
                                                                              t-esc="combination_info['list_price']"
                                                                              t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"
                                                                              itemprop="listPrice"
                                                                        />
                                                                        <t t-if="is_view_active('website_sale.tax_indication')"
                                                                           t-call="website_sale.tax_indication"/>
                                                                        <del t-if="combination_info['compare_list_price'] and (combination_info['compare_list_price'] &gt; combination_info['price'])">
                                                                            <bdi dir="inherit">
                                                                                <span t-esc="combination_info['compare_list_price']"
                                                                                      groups="website_sale.group_product_price_comparison"
                                                                                      t-options='{"widget": "monetary","display_currency": website.currency_id,}'/>
                                                                            </bdi>
                                                                        </del><t t-if="line.product_uom">/<t t-esc="line.product_uom.name"/></t>
                                                                    </h5>
                                                                    <h5 class="css_non_editable_mode_hidden decimal_precision"
                                                                        t-att-data-precision="str(website.currency_id.decimal_places)">
                                                                        <span t-field="line.product_id.list_price"
                                                                              t-options='{"widget": "monetary","display_currency": line.product_id.currency_id,}'/>
                                                                        <t t-if="is_view_active('website_sale.tax_indication')"
                                                                           t-call="website_sale.tax_indication"/>
                                                                        <del t-if="combination_info['compare_list_price'] and (combination_info['compare_list_price'] &gt; combination_info['price'])">
                                                                            <bdi dir="inherit">
                                                                                <span t-field="line.product_id.compare_list_price"
                                                                                      groups="website_sale.group_product_price_comparison"
                                                                                      t-options='{"widget": "monetary","display_currency": website.currency_id,}'/>
                                                                            </bdi>
                                                                        </del><t t-if="line.product_uom">/<t t-esc="line.product_uom.name"/></t>
                                                                    </h5>
                                                                </t>
                                                            </div>
                                                        </div>
                                                    </t>
                                                </div>
                                            </t>
                                        </div>
                                        <t t-set="payment_tx_id" t-value="order.get_portal_last_transaction()"/>
                                        <t t-if="payment_tx_id.state in ['error', 'cancel']">
                                            <div class="try-again-button">
                                                <a href="/shop/payment">
                                                    Try again
                                                    <img src="/cr_web_portal/static/src/images/mech-custom/bx-revision.png"></img>
                                                </a>
                                            </div>
                                        </t>
                                        <t t-else="">
                                            <div class="d-flex order_payment_transaction_details_section"
                                                 t-if="order and order.website_order_line and not order.is_customisable">
                                                <div class="order_transaction_details col-xl-6 text-left">
                                                    <p class="txn_row_odd" t-if="payment_tx_id.create_date">Transaction
                                                        Date
                                                    </p>
                                                    <p class="txn_row_even" t-if="payment_tx_id.create_date">
                                                        <t t-esc="payment_tx_id.create_date.strftime('%A, %B %d, %Y')"/>
                                                    </p>
                                                    <p class="txn_row_odd"
                                                       t-if="payment_tx_id.provider_id.display_as or payment_tx_id.provider_id">
                                                        Payment Method
                                                    </p>
                                                    <p class="txn_row_even">
                                                        <t t-esc="payment_tx_id.provider_id.display_as or payment_tx_id.provider_id.name"/>
                                                    </p>
                                                    <p class="txn_row_odd"
                                                       t-if="order.transaction_ids and len(order.transaction_ids.filtered(lambda x: x.id == payment_tx_id.id)) &gt; 0 and order.x_studio_date_of_delivery">
                                                        Estimated Delivery
                                                    </p>
                                                    <p class="txn_row_even"
                                                       t-if="order.transaction_ids and len(order.transaction_ids.filtered(lambda x: x.id == payment_tx_id.id)) &gt; 0 and order.x_studio_date_of_delivery">
                                                        <t t-out="order.x_studio_date_of_delivery.strftime('%A, %B %d, %Y')"/>
                                                    </p>
                                                </div>
                                                <div class="order_payment_details col-xl-6">
                                                    <div class="js_cart_summary"
                                                         t-if="order and order.website_order_line">
                                                        <div class="cart_summary_card">
                                                            <div id="cart_total" t-att-class="">
                                                                <div id="order_sub_total">
                                                                    <div class="d-flex justify-content-between">
                                                                        <div class="text-start div-cell border-0 p-0">
                                                                            Price
                                                                        </div>
                                                                        <div t-if="not order.carrier_id"
                                                                             class="text-xl-end div-cell border-0 p-0"
                                                                             style="font-size: larger !important;">
                                                                            <span t-field="order.amount_untaxed"
                                                                                  class="monetary_field"
                                                                                  style="white-space: nowrap;"
                                                                                  t-options="{'widget': 'monetary', 'display_currency': order.currency_id}"/>
                                                                        </div>
                                                                        <div t-else=""
                                                                             class="text-xl-end div-cell border-0 p-0"
                                                                             style="font-size: larger !important;">
                                                                            <span t-esc="order.get_without_delivery_amount()"
                                                                                  style="white-space: nowrap;"
                                                                                  t-options="{'widget': 'monetary', 'display_currency': order.currency_id}"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div id="order_delivery"
                                                                     t-if="order and order.carrier_id">
                                                                    <div class="d-flex justify-content-between">
                                                                        <div class="text-start div-cell border-0 p-0"
                                                                             title="Delivery will be updated after choosing a new delivery method">
                                                                            Delivery Charge
                                                                        </div>
                                                                        <div class="text-xl-end div-cell border-0 p-0"
                                                                             style="font-size: larger !important;">
                                                                            <span t-field="order.amount_delivery"
                                                                                  class="monetary_field"
                                                                                  style="white-space: nowrap;"
                                                                                  t-options='{"widget": "monetary","display_currency": order.currency_id,}'/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div id="order_total_untaxed"
                                                                     t-if="website_sale_order and website_sale_order.carrier_id">
                                                                    <div class="d-flex justify-content-between">
                                                                        <div class="text-start div-cell border-0 p-0">
                                                                            Sub Total
                                                                        </div>
                                                                        <div class="text-xl-end div-cell border-0 p-0"
                                                                             style="font-size: larger !important;">
                                                                            <span t-field="website_sale_order.amount_untaxed"
                                                                                  class="monetary_field"
                                                                                  style="white-space: nowrap;"
                                                                                  t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div id="order_total_taxes">
                                                                    <div class="d-flex justify-content-between">
                                                                        <div class="text-start div-cell border-0 p-0">
                                                                            GST
                                                                        </div>
                                                                        <div class="text-xl-end div-cell border-0 p-0"
                                                                             style="font-size: larger !important;">
                                                                            <span t-field="order.amount_tax"
                                                                                  class="monetary_field"
                                                                                  style="white-space: nowrap;"
                                                                                  t-options="{'widget': 'monetary', 'display_currency': order.currency_id}"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div id="order_total" class="border-top">
                                                                    <div class="d-flex justify-content-between">
                                                                        <div class="text-start div-cell border-bottom-0 p-0">
                                                                            <strong class="p-0">Total Amount</strong>
                                                                        </div>
                                                                        <div class="text-xl-end div-cell border-bottom-0 p-0"
                                                                             style="font-size: larger !important;">
                                                                            <strong t-field="order.amount_total"
                                                                                    class="monetary_field"
                                                                                    t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="oe_structure" id="oe_structure_website_sale_confirmation_3"/>
            </div>
        </xpath>
    </template>

    <!--     For Product carousel lin add     -->
    <template id="cr_web_portal.portal_carousel_product_indicators_custom"
              inherit_id="website_sale.carousel_product_indicators">
        <xpath expr="//div[contains(@t-attf-class, 'o_carousel_product_indicators')]" position="before">
        </xpath>
    </template>

    <!--    For Product Filters add fields in Shop page in Tablate & mobile view-->
    <template id="cr_web_portal.o_wsale_offcanvas_custom" inherit_id="website_sale.o_wsale_offcanvas">
        <xpath expr="//t[@t-foreach='attributes']" position="before">
            <input t-if="category" type="hidden" name="category" t-att-value="category.id"/>
            <t t-set="product_categories" t-value="request.env['product.public.category'].sudo().search([])"/>
            <div t-if="product_categories and len(product_categories) &gt; 1" class="accordion-item">
                <h2 class="accordion-header mb-0">
                    <button t-attf-class="o_wsale_offcanvas_title accordion-button border-top rounded-0 {{ not category and 'collapsed'}}"
                            type="button"
                            t-att-data-status="_status"
                            data-bs-toggle="collapse"
                            t-attf-data-bs-target="#o_wsale_offcanvas_category"
                            t-att-aria-expanded="_status == 'active' and 'True' or 'False'">
                        <b>Category</b>
                    </button>
                </h2>
                <div id="o_wsale_offcanvas_category"
                     t-attf-class="accordion-collapse collapse {{ (_status == 'active') and 'show'}}"
                     t-att-aria-expanded="(_status == 'active') and 'True' or 'False'">
                    <div class="accordion-body pt-0">
                        <div class="list-group list-group-flush">
                            <div t-foreach="product_categories" t-as="product_category"
                                 class="list-group-item border-0 ps-0 pb-0">
                                <div class="form-check mb-1">
                                    <input type="checkbox" name="category_select" class="form-check-input"
                                           t-att-value="'category-%s' %product_category.id"
                                           t-att-checked="'checked' if product_category.id in category_set else None"/>
                                    <label class="form-check-label fw-normal"
                                           t-att-for="'category-%s' %product_category.id"
                                           t-field="product_category.name"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>


    <template id="mp_shop_product_carousel" inherit_id="website_sale.shop_product_carousel">
        <xpath expr="//t[@t-if='len(product_images) > 1']" position="replace">
            <t t-if="len(product_images) > 1">
                <a class="carousel-control-prev" href="#o-carousel-product" role="button" data-bs-slide="prev">
                    <img src="/cr_web_portal/static/src/images/new_design_resource/arrow-down.svg"
                         style="transform: rotate(-90deg) !important;padding:6px;border: 1px solid #E6E6E6;border-radius: 50%;background: #fff;"
                         class="oe_unmovable" role="img" aria-label="Previous" title="Previous" width="34px"
                         height="34px"/>
                </a>
                <a class="carousel-control-next" href="#o-carousel-product" role="button" data-bs-slide="next">
                    <img src="/cr_web_portal/static/src/images/new_design_resource/arrow-down.svg"
                         style="transform: rotate(90deg) !important;padding:6px;border: 1px solid #E6E6E6;border-radius: 50%;background: #fff;"
                         class="oe_unmovable" role="img" aria-label="Next" title="Next" width="34px" height="34px"/>
                </a>
            </t>
        </xpath>
    </template>
    <template id="sale_order_portal_content_custom" inherit_id="sale.sale_order_portal_content">
        <xpath expr="//div[@id='introduction']" position="replace">
            <!--  As Per New Design Sale order Template Introduction/Header Section           -->
            <div class="header-section">
                <h5>
                    <t t-out="sale_order.type_name"/>
                    <t t-out="sale_order.name"/>
                </h5>
                <div class="gap-2">
                    <button class="send_quey_btn message-item-portal" t-att-data-res-model="sale_order._name" t-att-data-res-id="sale_order.id" t-att-data-user-id="request.env.user.partner_id.id">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/message-green.svg" width="16"
                             height="16"/>
                        Send query
                    </button>
                    <t t-if="sale_order.can_reorder()">
                        <a data-bs-toggle="modal" t-attf-data-bs-target="#reorder_popup_{{sale_order.id}}"
                           t-att-id="sale_order.id" class="pay_now_btn align-center">
                            <img src="/cr_web_portal/static/src/images/mech-custom/bx-revision.png" width="16" style="margin-top: -4px;"
                                 height="16"/>
                            Re-Order
                        </a>
                    </t>
                    <main class="message-details d-none" t-att-data-res-model="sale_order._name" t-att-data-res-id="sale_order.id">
                        <header>
                            <div class="d-flex" style="gap: 10px; align-items:center;">
                                <div class="back-img close-message">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/arrow-left.png"/>
                                </div>
                                <div class="header-info">
                                    <span class="category">SALES ORDER</span>
                                    <span class="message-id"><t t-esc="sale_order.name"/></span>
                                </div>
                            </div>
                            <a class="helpdesk-button" href="">
                            </a>
                        </header>
                        <div class="chat-content">
                            <div class="chat-message incoming">
                                <div class="user-img">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/user-msg.png"/>
                                </div>
                                <div class="msg-details">
                                    <div class="sender"></div>
                                    <p></p>
                                </div>
                            </div>
                            <div class="chat-message outgoing">
                                <div class="user-img">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/user-msg.png"/>
                                </div>
                                <div class="msg-details">
                                    <div class="sender"></div>
                                    <p></p>
                                </div>
                            </div>
                        </div>
                        <footer class="message-input">
                            <div class="file-card d-none">
                                <div class="file-card-content">
                                    <span class="file-icon">
                                        <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                    </span>
                                    <span class="file-name"></span>
                                    <img class="remove-file" style="margin-left: 8px;" src="/cr_web_portal/static/src/images/new_design_resource/black_cross_btn.svg"/>
                                </div>
                            </div>
                            <input type="text" placeholder="Enter a message"/>
                            <input type="file" id="attachment-input" style="display: none;"/>
                            <div class="msg-options">
                                <a class="link-button">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                </a>
                                <a class="send-button-portal" t-attf-data-action="/mail/chatter_post">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/send-2.png"/>
                                </a>
                            </div>
                        </footer>
                    </main>
                </div>
            </div>
            <!--  As Per New Design Sale order Template New Price and Sale Order New Button Section           -->
            <div class="header-section-2">
                <div class="object_amount_total">
                    <span t-field="sale_order.amount_total"/>
                </div>
                <div class="button-section">
                    <a class="normal-btn" t-att-href="sale_order.get_portal_url(report_type='pdf', download=True)">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/import.svg" width="24"
                             height="24"/>
                    </a>
                    <a class="normal-btn" t-att-href="sale_order.get_portal_url(report_type='pdf')">
                        <img src="/cr_web_portal/static/src/images/new_design_resource/printer.svg" width="24"
                             height="24"/>
                    </a>
                    <t t-if="sale_order.payment_term_id and sale_order.payment_term_id.is_advance_payment">
                        <a t-if="sale_order._has_to_be_signed(True)"
                           role="button"
                           class="pay_now_btn" data-bs-toggle="modal"
                           data-bs-target="#modalaccept"
                           href="#">
                            Accept &amp; Pay
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                        <a t-elif="sale_order._has_to_be_paid(True)"
                           role="button" id="o_sale_portal_paynow"
                           data-bs-toggle="modal" data-bs-target="#modalaccept"
                           href="#"
                           class="pay_now_btn">
                            <t t-if="not sale_order.signature">Accept &amp; Pay</t>
                            <t t-else="">Pay Now</t>
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                        <a t-elif="sale_order.state == 'sent' and not sale_order._has_to_be_paid(True) and not sale_order._has_to_be_signed(True)"
                           role="button" id="o_sale_portal_paynow"
                           data-bs-toggle="modal" data-bs-target="#modalaccept1"
                           href="#"
                           class="pay_now_btn">
                            <t t-if="not sale_order.signature">Accept &amp; Pay</t>
                            <t t-else="">Pay Now</t>
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                        <a t-elif="not sale_order.is_remaining_amount() and sale_order.state == 'sale' and (not sale_order.get_portal_last_transaction() or (sale_order.get_portal_last_transaction() and sale_order.get_portal_last_transaction().state != 'done'))"
                           data-bs-toggle="modal" data-bs-target="#modalaccept1"
                           href="#"
                           class="pay_now_btn">
                            Pay Now
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                        <a t-if="sale_order.is_remaining_amount()"
                           role="button" id="o_sale_portal_paynow"
                           data-bs-toggle="modal" data-bs-target="#modalaccept1" href="#"
                           class="pay_now_btn">
                            Pay Now
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                    </t>
                    <t t-else="">
                        <a t-if="sale_order._has_to_be_signed(True)"
                           role="button" class="pay_now_btn"
                           data-bs-toggle="modal" data-bs-target="#modalaccept"
                           href="#">
                            <t t-if="sale_order._has_to_be_paid(True)">Sign &amp; Pay</t>
                            <t t-else="">Accept &amp; Pay</t>
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                        <a t-elif="sale_order._has_to_be_paid(True)"
                           role="button" id="o_sale_portal_paynow"
                           data-bs-toggle="modal" data-bs-target="#modalaccept"
                           href="#"
                           class="pay_now_btn">
                            Pay Now
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                        <a t-elif="not sale_order.is_remaining_amount() and sale_order.state == 'sale' and (not sale_order.get_portal_last_transaction() or (sale_order.get_portal_last_transaction() and sale_order.get_portal_last_transaction().state != 'done'))"
                           data-bs-toggle="modal" data-bs-target="#modalaccept1"
                           href="#"
                           class="pay_now_btn">
                            Pay Now
                            <img src="/cr_web_portal/static/src/images/new_design_resource/shopping-cart.svg"
                                 width="16"
                                 height="16"/>
                        </a>
                    </t>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[contains(@t-attf-class, 'card-body')]" position="replace">
            <div t-attf-class="content-box">
                <!-- Informations -->
                <div id="informations">
                    <div t-if="sale_order.transaction_ids and not invoices and sale_order.state in ('sent', 'sale') and portal_confirmation == 'pay' and not success and not error"
                         t-att-data-order-id="sale_order.id">
                        <t t-if="sale_order.transaction_ids">
                            <t t-call="payment.transaction_status">
                                <t t-set="tx" t-value="sale_order.get_portal_last_transaction()"/>
                            </t>
                        </t>
                    </div>
                    <div t-if="sale_order.state in ('done', 'sale') and sale_order.get_portal_order_status()" class="order_status_div">
                        <div>
                        </div>
                        <div>
                            <div class="line_value portal_obj_value">
                                <div class="status_link text-bg-info" style="font: 500 16px/24px 'Poppins-regular' !important">
                                    <t t-esc="sale_order.get_portal_order_status()"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row content-details" id="so_date">
                        <div class="col-6">
                            <div class="portal_grey">
                                <t t-if="sale_order.state in ['sale', 'done', 'cancel']">
                                    Order Date
                                </t>
                                <t t-else="">Quotation Date</t>
                            </div>
                            <div class="portal_obj_value">
                                <span t-field="sale_order.date_order" t-options='{"widget": "date"}'/>
                            </div>
                        </div>
                    </div>
                    <div class="row content-details mb-0" id="invoicing_shipping_address">
                        <div class="col-lg-6 col-6" t-if="sale_order.partner_shipping_id == sale_order.partner_invoice_id" style="margin-bottom: 16px;">
                            <div class="portal_grey">Invoicing and Shipping Address</div>
                            <div class="address_obj_value" t-out="sale_order.partner_invoice_id.name"/>
                            <t t-esc="sale_order.partner_invoice_id"
                               t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                        </div>
                        <div class="col-lg-6 col-6" style="margin-bottom: 16px;" t-else="">
                            <div class="portal_grey">Invoicing Address</div>
                            <div class="address_obj_value" t-out="sale_order.partner_invoice_id.name"/>
                            <t t-esc="sale_order.partner_invoice_id"
                               t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                        </div>
                        <div class="col-lg-6 col-6" t-if="sale_order.partner_shipping_id != sale_order.partner_invoice_id" style="margin-bottom: 16px;">
                            <div class="portal_grey">Shipping Address</div>
                            <div class="address_obj_value" t-out="sale_order.partner_shipping_id.name"/>
                            <t t-esc="sale_order.partner_shipping_id"
                               t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                        </div>

                        <div class="col-lg-6 col-sm-12" t-if="sale_order.client_order_ref">
                            <div class="portal_grey">
                                Purchase Order Nr
                            </div>
                            <div class="portal_obj_value">
                                <span t-esc="sale_order.client_order_ref"/>
                            </div>
                            <div class="portal_grey col-8" t-if="sale_order.x_studio_purchase_order_copy">
                                Purchase Order
                            </div>
                            <div class="portal_obj_value">
                                <a target='_blank' t-attf-href="/web/content/sale.order/#{sale_order.id}/x_studio_purchase_order_copy/download=true" class="file-button">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                    <span t-esc="sale_order.x_studio_purchase_order_copy_filename"/>
                                </a>
                            </div>
                        </div>
                        <t t-set="invoices"
                           t-value="sale_order.invoice_ids.filtered(lambda i: i.state not in ['draft', 'cancel'])"/>
                        <div class="col-lg-6 col-sm-12" t-if="invoices">
                            <div class="portal_grey">Invoices</div>
                            <ul class="list-group mb-4">
                                <t t-foreach="invoices" t-as="i">
                                    <t t-set="report_url"
                                       t-value="i.get_portal_url(report_type='pdf', download=True)"/>
                                    <t t-set="authorized_tx_ids"
                                       t-value="i.transaction_ids.filtered(lambda tx: tx.state == 'authorized')"/>
                                    <div class="d-flex mb-2 mt-2 align-center gap-3">
                                        <div class="portal_obj_value">
                                            <a t-att-href="report_url">
                                                <span t-out="i.name"/>
                                            </a>
                                        </div>
                                        <div class="portal_obj_value">Date:
                                            <span class="text-muted" t-field="i.invoice_date"/>
                                        </div>
                                    </div>
                                </t>
                            </ul>
                        </div>
                        <div class="col-lg-6" t-if="not sale_order.state in ('done', 'sale')">
                            <div class="portal_grey">
                                Status
                            </div>
                            <div class="line_value portal_obj_value">
                                <div class="status_link text-bg-info">
                                    <t t-esc="sale_order.get_portal_order_status()"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <section id="details" style="page-break-inside: auto;" class="">
                    <t t-set="display_discount"
                       t-value="True in [line.discount > 0 for line in sale_order.order_line]"/>

                    <div class="table-responsive">
                        <table t-att-data-order-id="sale_order.id" t-att-data-token="sale_order.access_token"
                               class="table" id="sales_order_table">
                            <thead class="bg-100">
                                <tr>
                                    <th class="text-start" id="product_name_header">Products</th>
                                    <th class="text-center">Quantity</th>
                                    <th t-attf-class="text-center {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}" style="width: 13%;">
                                        Unit Price
                                    </th>
                                    <th t-if="display_discount"
                                        t-attf-class="text-center {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                                        <span>Disc.%</span>
                                    </th>
                                    <th t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" style="width: 10%;">
                                        <span>Taxes</span>
                                    </th>
                                    <th class="text-center">
                                        <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                                        <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="sale_tbody">

                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="lines_to_report" t-value="sale_order._get_order_lines_to_report()"/>

                                <t t-foreach="lines_to_report" t-as="line">

                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"
                                       groups="account.group_show_line_subtotals_tax_excluded"/>
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"
                                       groups="account.group_show_line_subtotals_tax_included"/>

                                    <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="not line.display_type">
                                            <td id="product_name">
                                                <span t-field="line.name"/>
                                            </td>
                                            <td class="text-center">
                                                <div id="quote_qty">
                                                    <span t-field="line.product_uom_qty"/>
                                                    <span t-field="line.product_uom"/>
                                                </div>
                                            </td>
                                            <td t-attf-class="text-center {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                                                <div
                                                        t-if="line.discount &gt;= 0"
                                                        t-field="line.price_unit"
                                                        t-att-style="line.discount and 'text-decoration: line-through' or None"
                                                        t-att-class="(line.discount and 'text-danger' or '') + ' text-center'"
                                                        t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'
                                                />
                                                <div t-if="line.discount">
                                                    <t t-out="(1-line.discount / 100.0) * line.price_unit"
                                                       t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                                </div>
                                            </td>
                                            <td t-if="display_discount"
                                                t-attf-class="text-center {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                                                <strong t-if="line.discount &gt; 0" class="text-info">
                                                    <t t-out="((line.discount % 1) and '%s' or '%d') % line.discount"/>%
                                                </strong>
                                            </td>
                                            <td t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                <span t-out="', '.join(map(lambda x: (x.description or x.name), line.tax_id))"/>
                                            </td>
                                            <td t-if="not line.is_downpayment" class="text-center">
                                                <span class="oe_order_line_price_subtotal" t-field="line.price_subtotal"
                                                      groups="account.group_show_line_subtotals_tax_excluded"/>
                                                <span class="oe_order_line_price_total" t-field="line.price_total"
                                                      groups="account.group_show_line_subtotals_tax_included"/>
                                            </td>
                                        </t>
                                        <t t-if="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name"/>
                                            </td>
                                            <t t-set="current_section" t-value="line"/>
                                            <t t-set="current_subtotal" t-value="0"/>
                                        </t>
                                        <t t-if="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name"/>
                                            </td>
                                        </t>
                                    </tr>
                                    <tr t-if="current_section and (line_last or lines_to_report[line_index+1].display_type == 'line_section') and not line.is_downpayment"
                                        class="is-subtotal text-end">
                                        <td colspan="99">
                                            <strong class="mr16">Subtotal</strong>
                                            <span t-out="current_subtotal"
                                                  t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'
                                            />
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>

                    <div id="total" class="" name="total" style="page-break-inside: avoid;">
                        <div t-attf-class="col-md-6">
                            <t t-call="sale.sale_order_portal_content_totals_table"/>
                        </div>
                    </div>
                </section>
                <t t-set="delivery_orders"
                            t-value="sale_order.picking_ids.filtered(lambda picking: picking.picking_type_id.code == 'outgoing')"/>

            <secion class="delivery_items" t-if="delivery_orders and report_type == 'html'">
                <div class="content-box">
                    <t t-foreach="delivery_orders" t-as="delivery">
                        <div id="myCollapse" class="accordion custom-accordion" role="tablist">
                        <div class="card bg-white" data-name="Item">
                            <a href="#" role="tab" data-bs-toggle="collapse" aria-expanded="false"
                               class="card-header s_faq_collapse_right_icon collapsed"
                               t-att-data-bs-target="'#myCollapseTab_%s'%delivery.id">
                                <div class="row">
                                    <div class="col-4 d-flex gap-2">
                                        <t t-if="delivery.move_ids_without_package">
                                            <t  t-if="delivery.move_ids_without_package[0].product_id">
                                                <t t-set="image_holder" t-value="delivery.move_ids_without_package[0].product_id._get_image_holder()"/>
                                                <div class="delivery_product_img" t-field="image_holder.image_1920" t-options='{"widget": "image"}'/>
                                            </t>
                                            <t t-if="len(delivery.move_ids_without_package) > 1">
                                                <div class="extra_products delivery_value">
                                                    +<t t-esc="len(delivery.move_ids_without_package) - 1"/>
                                                </div>
                                            </t>
                                        </t>
                                    </div>
                                    <div class="col-4">
                                        <t t-if="delivery.name">
                                            <span class="delivery_label">
                                                Delivery Order:
                                            </span>
                                            <br/>
                                            <span class="delivery_value" t-field="delivery.name"/>
                                        </t>
                                    </div>
                                    <div class="col-4">
                                        <t t-if="delivery.date_done">
                                            <span class="delivery_label">
                                                Date:
                                            </span>
                                            <br/>
                                            <span class="delivery_value" t-field="delivery.date_done" t-options='{"widget": "date"}'/>
                                        </t>
                                    </div>
                                </div>
                            </a>
                            <div class="collapse" data-bs-parent="#myCollapse" role="tabpanel"
                                 t-att-id="'myCollapseTab_%s'% delivery.id" t-if="delivery.move_ids_without_package">
                                    <div class="table-responsive">
                                        <table  class="table" style="margin-bottom: 0px;">
                                            <thead class="bg-100">
                                                <tr>
                                                    <th></th>
                                                    <th class="text-start" id="product_name_header" style="width: 40%;">Products</th>
                                                    <th class="text-center" style="width: 15%;">Quantity</th>
                                                    <th class="text-center"
                                                        style="width: 15%;">
                                                        Unit Price
                                                    </th>
                                                    <th class="text-center"
                                                        style="width: 15%;">
                                                        <span>Taxes</span>
                                                    </th>
                                                    <th class="text-center" style="width: 15%;">
                                                        <span>
                                                            Amount
                                                        </span>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody class="sale_tbody">

                                                <t t-set="count" t-value="1"/>
                                                <t t-foreach="delivery.move_ids_without_package" t-as="line">
                                                    <t t-if="line.sale_line_id">
                                                        <tr>
                                                            <td class="text-end">
                                                                <t t-esc="count"/>
                                                                <t t-set="count" t-value="count + 1"/>.
                                                            </td>
                                                            <td id="product_name">
                                                                <span t-field="line.product_id"/>
                                                            </td>
                                                            <td class="text-center">
                                                                <div id="quote_qty">
                                                                    <span t-field="line.quantity_done"/>
                                                                    <span t-field="line.product_uom"/>
                                                                </div>
                                                            </td>
                                                            <td class="text-center">
                                                                <span class="oe_order_line_price_total"
                                                                      t-field="line.sale_line_id.price_unit" t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                                            </td>
                                                            <td t-attf-class="text-end">
                                                                <t t-out="', '.join(map(lambda x: (x.description or x.name), line.sale_line_id.tax_id))"/>
                                                            </td>
                                                            <td class="text-center">
                                                                <span class="oe_order_line_price_total"
                                                                      t-esc="line.quantity_done * line.sale_line_id.price_unit" t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'/>
                                                            </td>
                                                        </tr>
                                                    </t>
                                                </t>
                                            </tbody>
                                        </table>
                                    </div>
                            </div>
                        </div>
                    </div>

                    </t>
                </div>
            </secion>

            <section t-if="sale_order.signature" id="signature" name="Signature">
                <div class="mt-4" name="signature">
                    <div t-attf-class="#{'col-3' if report_type != 'html' else 'col-sm-7 col-md-4'} ms-auto text-center">
                        <h5>Signature</h5>
                        <img t-att-src="image_data_uri(sale_order.signature)"
                             style="max-height: 6rem; max-width: 100%;"/>
                        <p t-field="sale_order.signed_by"/>
                    </div>
                </div>
            </section>

            <secion id="inquiry_details" t-if="file_value_custom" class="d-grid" name="enc_inquriy">
                <div class="col-12">
                    <t t-foreach="file_value_custom" t-as="file">
                        <div class="col-12 mb-2">
                            <t t-set="file_name" t-att-value="file['name']"/>
                            <div class="portal_grey"><span t-esc="file['title']"/></div>
                            <div class="portal_obj_value">
                                <a t-att-href="file['download_url']" t-att-download="file['name']"
                                   class="file-button">
                                    <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                    <t t-out="file['name']"/>
                                </a>
                            </div>
                        </div>
                    </t>
                </div>
                <div class="col-12 mt-4" t-if="extra_info_file">
                    <t t-foreach="extra_info_file" t-as="file">
                        <t t-if="file['title'] != 'Additional Notes : '">
                            <div class="col-6 mb-1">
                                <t t-set="file_name" t-att-value="file['name']"/>
                                <div class="portal_grey"><span t-esc="file['title']"/></div>
                                <div class="portal_obj_value">
                                    <a t-att-href="file['download_url']" t-att-download="file['name']"
                                       class="file-button">
                                        <i class="fa fa-paperclip"/>
                                        <t t-out="file['name']"/>
                                    </a>
                                </div>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="col-12 mb-1">
                                <span t-esc="file['title']"/>
                                <t t-esc="file['note']"/>
                            </div>
                        </t>
                    </t>
                </div>

            </secion>

            <section id="inquiry_details" style="page-break-inside: auto;" class="" t-if="sale_order.service in ['enclosure_design','fdm_modeling','projection_printing','sheet_metal_fabrication','cnc_machining','injection_molding'] and any((line.product_id.is_enclosure_service or line.product_id.is_fdm_service or line.product_id.is_projection_service or line.product_id.is_metal_feb_service or line.product_id.is_cnc_machining_service or line.product_id.is_injection_mold_service) for line in sale_order.order_line)">
                <h5 class="portal_title_section">Details</h5>
                <t t-set="lines_to_report" t-value="sale_order.order_line[0]"/>
                <div t-if="sale_order.service == 'enclosure_design'" name="enc_inquriy">
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].name" class="portal_grey">
                        Product Name?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].name" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].name"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_purpose" class="portal_grey">What is
                        the purpose of the electronic product?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_purpose" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_purpose"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_features" class="portal_grey">What are
                        the main functionalities and features of the product?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_features" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_features"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_dimensions" class="portal_grey">What are
                        the dimensions of the electronic components that will be housed inside the
                        enclosure?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_dimensions" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_dimensions"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_temperatures" class="portal_grey">What are
                        the maximum and minimum operating temperatures for the product?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_temperatures" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_temperatures"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_specific_environmental" class="portal_grey">Are
                        there any specific environmental conditions the enclosure needs to withstand?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_specific_environmental" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_specific_environmental"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_mounted" class="portal_grey">How will
                        the enclosure be mounted or installed ?:
                    </div>
                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_mounted"/>
                    <br/>

                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_placed" class="portal_grey">Where
                        will the enclosure be placed (indoor, outdoor, harsh environment, etc.)?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_placed" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_placed"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_connectors" class="portal_grey">Are
                        there any connectors, buttons, displays, or other interfaces that need to be
                        accessible
                        from the outside of the enclosure?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_connectors" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_connectors"/>
                    </div>
                    <br/>

                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_interact" class="portal_grey">How will
                        the user interact with the product?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_interact" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_interact"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_materials" class="portal_grey">Are
                        there any specific materials or material properties preferred for the enclosure?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_materials" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_materials"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_design" class="portal_grey">Are
                        there any specific design elements, colors, or branding requirements for the
                        enclosure?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_design" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_design"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_significant_heat" class="portal_grey">Does the
                        product generate significant heat? If so, how will it be cooled?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_significant_heat" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_significant_heat"/>
                    </div>
                    <br/>

                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_ventilation_requirements" class="portal_grey">Are
                        there any specific ventilation requirements for the enclosure?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_ventilation_requirements" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_ventilation_requirements"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_safety_standards" class="portal_grey">Are
                        there any safety standards or certifications that the enclosure needs to comply
                        with?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_safety_standards" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_safety_standards"/>
                    </div>
                    <br/>

                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_existing_enclosure_designs" class="portal_grey">Do you
                        have any existing enclosure designs or samples that can serve as a reference or
                        starting point?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_existing_enclosure_designs" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_existing_enclosure_designs"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_ventilation_requirements" class="portal_grey">Are
                        there any specific ventilation requirements for the enclosure?:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_ventilation_requirements" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_specific_ventilation_requirements"/>
                    </div>
                    <br/>
                    <br/>

                    <div class="portal_grey">Who will
                        be the main point of contact for communication during the design process?
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_name" class="portal_grey">Name:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_name" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_name"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_email" class="portal_grey">Email:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_email" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_email"/>
                    </div>
                    <br/>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_phone" class="portal_grey">Phone
                        Number:
                    </div>
                    <div t-if="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_phone" class="portal_obj_value">
                        <span t-field="lines_to_report.product_template_id.product_variant_ids[0].enclosure_design_product_communicater_phone"/>
                    </div>
                    <br/>
                    <t t-foreach="service_file" t-as="file">
                        <div class="col-6" t-if="file">
                            <t t-set="file_name" t-att-value="file['name']"/>
                            <div class="portal_obj_value">
                                <span t-esc="file['title']"/>
                            </div>
                            <br/>
                            <div class="portal_obj_value">
                                <a t-att-href="file['download_url']" t-att-download="file['name']"
                                   class="file-button">
                                    <!--                                        <i class="fa fa-paperclip"/>-->
                                    <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                    <t t-out="file['name']"/>
                                </a>
                            </div>
                        </div>
                    </t>
                    <br/>

                </div>

                <t t-if="sale_order.service == 'fdm_modeling'">
                    <br/>
                    <div class="row" name="enc_inquriy">
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].fdm_material" class="col-6">
                            <div class="portal_grey">Choose Material</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].fdm_material"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].fdm_print_quality" class="col-6">
                            <div class="portal_grey">Print Quality</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].fdm_print_quality"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].fdm_color" class="col-6">
                            <div class="portal_grey">Color</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].fdm_color"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].fdm_infill" class="col-6">
                            <div class="portal_grey">InFill</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].fdm_infill"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].fdm_extra_note" class="col-6">
                            <div class="portal_grey">Extra Note</div>
                            <div class="portal_obj_value">
                                <t t-if="lines_to_report.product_template_id.product_variant_ids[0].fdm_extra_note">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].fdm_extra_note"/>
                                </t>
                                <t t-else="">
                                    -
                                </t>
                            </div>
                        </div>
                    </div>

                        <t t-foreach="service_file" t-as="file">
                            <div class="col-6">
                                <t t-set="file_name" t-att-value="file['name']"/>
                                <div class="portal_grey"><span t-esc="file['title']"/></div>
                                <div class="portal_obj_value">
                                    <a t-att-href="file['download_url']" t-att-download="file['name']"
                                       class="file-button">
                                       <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                        <t t-out="file['name']"/>
                                    </a>
                                </div>
                            </div>
                        </t>
                        <br/>
                </t>
                <t t-if="sale_order.service == 'projection_printing'">
                    <br/>
                    <div class="row" name="enc_inquriy">
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].projection_material" class="col-6">
                            <div class="portal_grey">Choose Material</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].projection_material"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].projection_print_quality" class="col-6">
                            <div class="portal_grey">Print Quality</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].projection_print_quality"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].projection_extra_note" class="col-6">
                            <div class="portal_grey">Extra Note</div>
                            <div class="portal_obj_value">
                                <t t-if="lines_to_report.product_template_id.product_variant_ids[0].projection_extra_note">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].projection_extra_note"/>
                                </t>
                                <t t-else="">
                                    -
                                </t>
                            </div>
                        </div>
                    </div>

                        <t t-foreach="service_file" t-as="file">
                            <div class="col-6">
                                <t t-set="file_name" t-att-value="file['name']"/>
                                <div class="portal_grey"><span t-esc="file['title']"/></div>
                                <div class="portal_obj_value">
                                    <a t-att-href="file['download_url']" t-att-download="file['name']"
                                       class="file-button">
                                       <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                        <t t-out="file['name']"/>
                                    </a>
                                </div>
                            </div>
                        </t>
                        <br/>
                </t>
                <t t-if="sale_order.service == 'sheet_metal_fabrication'">
                    <br/>
                    <div class="row" name="enc_inquriy">
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_material or lines_to_report.product_template_id.product_variant_ids[0].metal_feb_material_other" class="col-6">
                            <div class="portal_grey">Select Material</div>
                            <div class="portal_obj_value">
                                <t t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_material">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_material"/>
                                </t>
                                <t t-else="">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_material_other"/>
                                </t>
                            </div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_thickness or lines_to_report.product_template_id.product_variant_ids[0].metal_feb_thickness_other" class="col-6">
                            <div class="portal_grey">Thickness</div>
                            <div class="portal_obj_value">
                                <t t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_thickness">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_thickness"/>
                                </t>
                                <t t-else="">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_thickness_other"/>
                                </t>
                                </div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_is_welding" class="col-6">
                            <div class="portal_grey">Welding</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_is_welding"/></div>
                            <br/>
                        </div>
                        <div i-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_surface_finish" class="col-6">
                            <div class="portal_grey">Surface finish</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_surface_finish"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_surface_finish_other" class="col-6">
                            <div class="portal_grey">Surface Finish</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_surface_finish_other"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_color" class="col-6">
                            <div class="portal_grey">Colour</div>
                            <div class="portal_obj_value"> <span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_color"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_color_other" class="col-6">
                            <div class="portal_grey">Colour</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_color_other"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_extra_note" class="col-6">
                            <div class="portal_grey">Extra Note</div>
                            <div class="portal_obj_value">
                                <t t-if="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_extra_note">
                                    <span t-field="lines_to_report.product_template_id.product_variant_ids[0].metal_feb_extra_note"/>
                                </t>
                                <t t-else="">
                                    -
                                </t>
                            </div>
                        </div>
                    </div>

                        <t t-foreach="service_file" t-as="file">
                            <div class="col-6">
                                <t t-set="file_name" t-att-value="file['name']"/>
                                <div class="portal_grey"><span t-esc="file['title']"/></div>
                                <div class="portal_obj_value">
                                    <a t-att-href="file['download_url']" t-att-download="file['name']"
                                       class="file-button">
                                       <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                        <t t-out="file['name']"/>
                                    </a>
                                </div>
                            </div>
                        </t>
                        <br/>
                </t>
                <t t-if="sale_order.service == 'cnc_machining'">
                    <br/>
                    <div class="row" name="enc_inquriy">
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].cnc_machining_material" class="col-6">
                            <div class="portal_grey">Material</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].cnc_machining_material"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].cnc_machining_additional_notes" class="col-6">
                            <div class="portal_grey">Additional notes</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].cnc_machining_additional_notes"/></div>
                            <br/>
                        </div>
                        <br/>
                            <t t-foreach="service_file" t-as="file">
                                <div class="col-6">
                                    <t t-set="file_name" t-att-value="file['name']"/>
                                    <div class="portal_grey"><span t-esc="file['title']"/></div>
                                    <div class="portal_obj_value">
                                        <a t-att-href="file['download_url']" t-att-download="file['name']"
                                           class="file-button">
                                           <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                            <t t-out="file['name']"/>
                                        </a>
                                    </div>
                                </div>
                            </t>
                            <br/>
                    </div>
                </t>
                <t t-if="sale_order.service == 'injection_molding'">
                    <br/>
                    <div class="row" name="enc_inquriy">
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_material" class="col-6">
                            <div class="portal_grey">Material</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_material"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_material_other" class="col-6">
                            <div class="portal_grey">Material</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_material_other"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].cnc_machining_additional_notes" class="col-6">
                            <div class="portal_grey">colour</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].cnc_machining_additional_notes"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_colour_other" class="col-6">
                            <div class="portal_grey">Colour</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_colour_other"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_surface_finish" class="col-6">
                            <div class="portal_grey">Surface Finish</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_surface_finish"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_mold_requirements" class="col-6">
                            <div class="portal_grey">Mold Requirements</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_mold_requirements"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_no_of_cavity" class="col-6">
                            <div class="portal_grey">No. of cavity</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_no_of_cavity"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_runner" class="col-6">
                            <div class="portal_grey">Runner</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_runner"/></div>
                            <br/>

                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_size_of_the_mold" class="col-6">
                            <div class="portal_grey">Size of the mold[LxWxH, in mm]</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_size_of_the_mold"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_size_of_the_article" class="col-6">
                            <div class="portal_grey">Size of the article</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_size_of_the_article"/></div>
                            <br/>

                            <!--                <h3 id="details">Pricing</h3>-->
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_weight_of_the_article" class="col-6">
                            <div class="portal_grey">Weight of the article</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_weight_of_the_article"/></div>
                            <br/>
                        </div>
                        <div t-if="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_additional_notes" class="col-6">
                            <div class="portal_grey">Additional notes</div>
                            <div class="portal_obj_value"><span t-field="lines_to_report.product_template_id.product_variant_ids[0].injection_mold_additional_notes"/></div>
                            <br/>
                        </div>

                            <t t-foreach="service_file" t-as="file">
                                <div class="col-12">
                                    <t t-set="file_name" t-att-value="file['name']"/>
                                    <div class="portal_grey"><span t-esc="file['title']"/></div>
                                    <div class="portal_obj_value">
                                        <a t-att-href="file['download_url']" t-att-download="file['name']"
                                           class="file-button">
                                           <img src="/cr_web_portal/static/src/images/mech-custom/link.png"/>
                                            <t t-out="file['name']"/>
                                        </a>
                                    </div>
                                </div>
                            </t>
                            <br/>

                    </div>
                </t>
            </section>

            <section t-if="not is_html_empty(sale_order.note)" id="terms" class="mt-2">
                <h5 class="portal_title_section">Terms &amp; Conditions</h5>
                <span>
                    <ol>
                        <li>Pricing: The pricing stated is Ex-works, Ahmedabad, Gujarat, reflecting our competitive
                            rates
                            for the products and services offered.
                        </li>
                        <li>Freight: Please note that freight charges will be calculated separately based on actual
                            transportation costs incurred.
                        </li>
                        <li>Validity: This quotation is valid for a period of 30 days from the date of issuance.
                            After
                            this
                            period, pricing and availability are subject to review and confirmation.
                        </li>
                        <li>Taxes: All prices indicated are exclusive of taxes. <a>An additional 18% tax</a> will be
                            applicable, as specified in the calculation, in accordance with the prevailing tax
                            regulations.
                        </li>
                        <li>Payment Terms: To proceed with the order, we kindly request <a>full payment in
                            advance.</a> This
                            helps streamline the process and ensures prompt delivery of your requested products and
                            services.
                        </li>
                        <li>Mode of Dispatch: For efficient and reliable transportation, we utilize a trusted
                            network of
                            standard courier services that align with industry best practices.
                        </li>
                        <li>Warranty: Our products are accompanied by a comprehensive one-year warranty. However, it
                            is
                            important to note that the warranty does not cover damages resulting from improper
                            handling
                            or
                            usage beyond recommended guidelines.
                        </li>
                        <li>Delivery Time: The delivery time mentioned in this quotation pertains to the dispatch
                            from
                            our
                            premises. Please be aware that the duration required for safe transportation is excluded
                            and
                            subject to potential changes based on logistical considerations.
                        </li>
                        <li>Delivery Schedule: Delivery will be scheduled based on the availability of stock at the
                            time
                            of
                            order placement. Our team will promptly communicate any deviations or adjustments to the
                            estimated delivery timeline.
                        </li>
                        <li>Delivery Time Deviations: While our dedicated team is committed to ensuring timely
                            delivery
                            of
                            your orders, it is important to acknowledge that unforeseen circumstances and external
                            factors
                            beyond our direct control can occasionally impact logistics. Consequently, we cannot
                            accept
                            liability or claims for minor deviations from the stated delivery schedule.
                        </li>
                        <li>Order Placement: We kindly request that all orders be addressed exclusively to Mech
                            Power
                            Technology Private Limited. This ensures accurate processing and enables us to provide
                            you
                            with
                            the utmost attention and service.
                        </li>
                        <li>We request you place all your orders addressing Mech Power Technology Private Limited.
                            <br/>
                        </li>
                    </ol>

                </span>
            </section>
            <section t-if="sale_order.payment_term_id and sale_order.payment_term_id.name" class="mt-2 portal_payment_section">
                <h5 class="portal_title_section">Payment Terms</h5>
                <div class="portal_payment_description"><span t-field="sale_order.payment_term_id.name"/></div>
            </section>
        </xpath>
    </template>


</odoo>
